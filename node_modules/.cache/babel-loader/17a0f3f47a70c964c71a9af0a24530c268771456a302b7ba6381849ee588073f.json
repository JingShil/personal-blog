{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { h, defineComponent, computed, toRef, ref, provide, inject, watch, Transition, onMounted } from 'vue';\nimport Schema from 'async-validator';\nimport { get } from 'lodash-es';\nimport { createId } from 'seemly';\nimport { formItemInjectionKey } from \"../../_mixins/use-form-item.mjs\";\nimport { useConfig, useTheme, useThemeClass } from \"../../_mixins/index.mjs\";\nimport { warn, createKey, useInjectionInstanceCollection, keysOf, resolveWrappedSlot } from \"../../_utils/index.mjs\";\nimport { formLight } from \"../styles/index.mjs\";\nimport { formItemMisc, formItemSize, formItemRule } from \"./utils.mjs\";\nimport { formInjectionKey, formItemInstsInjectionKey } from \"./context.mjs\";\nimport style from \"./styles/form-item.cssr.mjs\";\nexport const formItemProps = Object.assign(Object.assign({}, useTheme.props), {\n  label: String,\n  labelWidth: [Number, String],\n  labelStyle: [String, Object],\n  labelAlign: String,\n  labelPlacement: String,\n  path: String,\n  first: Boolean,\n  rulePath: String,\n  required: Boolean,\n  showRequireMark: {\n    type: Boolean,\n    default: undefined\n  },\n  requireMarkPlacement: String,\n  showFeedback: {\n    type: Boolean,\n    default: undefined\n  },\n  rule: [Object, Array],\n  size: String,\n  ignorePathChange: Boolean,\n  validationStatus: String,\n  feedback: String,\n  showLabel: {\n    type: Boolean,\n    default: undefined\n  },\n  labelProps: Object\n});\nexport const formItemPropKeys = keysOf(formItemProps);\n// wrap sync validator\nfunction wrapValidator(validator, async) {\n  return (...args) => {\n    try {\n      const validateResult = validator(...args);\n      if (!async && (typeof validateResult === 'boolean' || validateResult instanceof Error || Array.isArray(validateResult)) || (\n      // Error[]\n      validateResult === null || validateResult === void 0 ? void 0 : validateResult.then)) {\n        return validateResult;\n      } else if (validateResult === undefined) {\n        return true;\n      } else {\n        warn('form-item/validate', `You return a ${typeof validateResult} ` + 'typed value in the validator method, which is not recommended. Please use ' + (async ? '`Promise`' : '`boolean`, `Error` or `Promise`') + ' typed value instead.');\n        return true;\n      }\n    } catch (err) {\n      warn('form-item/validate', 'An error is catched in the validation, ' + \"so the validation won't be done. Your callback in `validate` method of \" + \"`n-form` or `n-form-item` won't be called in this validation.\");\n      console.error(err);\n      // If returns undefined, async-validator won't trigger callback\n      // so the result will be abandoned, which means not true and not false\n      return undefined;\n    }\n  };\n}\nexport default defineComponent({\n  name: 'FormItem',\n  props: formItemProps,\n  setup(props) {\n    useInjectionInstanceCollection(formItemInstsInjectionKey, 'formItems', toRef(props, 'path'));\n    const {\n      mergedClsPrefixRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const NForm = inject(formInjectionKey, null);\n    const formItemSizeRefs = formItemSize(props);\n    const formItemMiscRefs = formItemMisc(props);\n    const {\n      validationErrored: validationErroredRef,\n      validationWarned: validationWarnedRef\n    } = formItemMiscRefs;\n    const {\n      mergedRequired: mergedRequiredRef,\n      mergedRules: mergedRulesRef\n    } = formItemRule(props);\n    const {\n      mergedSize: mergedSizeRef\n    } = formItemSizeRefs;\n    const {\n      mergedLabelPlacement: labelPlacementRef,\n      mergedLabelAlign: labelTextAlignRef,\n      mergedRequireMarkPlacement: mergedRequireMarkPlacementRef\n    } = formItemMiscRefs;\n    const renderExplainsRef = ref([]);\n    const feedbackIdRef = ref(createId());\n    const mergedDisabledRef = NForm ? toRef(NForm.props, 'disabled') : ref(false);\n    const themeRef = useTheme('Form', '-form-item', style, formLight, props, mergedClsPrefixRef);\n    watch(toRef(props, 'path'), () => {\n      if (props.ignorePathChange) return;\n      restoreValidation();\n    });\n    function restoreValidation() {\n      renderExplainsRef.value = [];\n      validationErroredRef.value = false;\n      validationWarnedRef.value = false;\n      if (props.feedback) {\n        feedbackIdRef.value = createId();\n      }\n    }\n    function handleContentBlur() {\n      void internalValidate('blur');\n    }\n    function handleContentChange() {\n      void internalValidate('change');\n    }\n    function handleContentFocus() {\n      void internalValidate('focus');\n    }\n    function handleContentInput() {\n      void internalValidate('input');\n    }\n    function validate(options, callback) {\n      return __awaiter(this, void 0, void 0, function* () {\n        /** the following code is for compatibility */\n        let trigger;\n        let validateCallback;\n        let shouldRuleBeApplied;\n        let asyncValidatorOptions;\n        if (typeof options === 'string') {\n          trigger = options;\n          validateCallback = callback;\n        } else if (options !== null && typeof options === 'object') {\n          trigger = options.trigger;\n          validateCallback = options.callback;\n          shouldRuleBeApplied = options.shouldRuleBeApplied;\n          asyncValidatorOptions = options.options;\n        }\n        return yield new Promise((resolve, reject) => {\n          void internalValidate(trigger, shouldRuleBeApplied, asyncValidatorOptions).then(({\n            valid,\n            errors,\n            warnings\n          }) => {\n            if (valid) {\n              if (validateCallback) {\n                validateCallback(undefined, {\n                  warnings\n                });\n              }\n              resolve({\n                warnings\n              });\n            } else {\n              if (validateCallback) {\n                validateCallback(errors, {\n                  warnings\n                });\n              }\n              reject(errors);\n            }\n          });\n        });\n      });\n    }\n    const internalValidate = (trigger = null, shouldRuleBeApplied = () => true, options = {\n      suppressWarning: true\n    }) => __awaiter(this, void 0, void 0, function* () {\n      const {\n        path\n      } = props;\n      if (!options) {\n        options = {};\n      } else {\n        if (!options.first) options.first = props.first;\n      }\n      const {\n        value: rules\n      } = mergedRulesRef;\n      const value = NForm ? get(NForm.props.model, path || '') : undefined;\n      const messageRenderers = {};\n      const originalMessageRendersMessage = {};\n      const activeRules = (!trigger ? rules : rules.filter(rule => {\n        if (Array.isArray(rule.trigger)) {\n          return rule.trigger.includes(trigger);\n        } else {\n          return rule.trigger === trigger;\n        }\n      })).filter(shouldRuleBeApplied).map((rule, i) => {\n        const shallowClonedRule = Object.assign({}, rule);\n        if (shallowClonedRule.validator) {\n          shallowClonedRule.validator = wrapValidator(shallowClonedRule.validator, false);\n        }\n        if (shallowClonedRule.asyncValidator) {\n          shallowClonedRule.asyncValidator = wrapValidator(shallowClonedRule.asyncValidator, true);\n        }\n        if (shallowClonedRule.renderMessage) {\n          const rendererKey = `__renderMessage__${i}`;\n          originalMessageRendersMessage[rendererKey] = shallowClonedRule.message;\n          shallowClonedRule.message = rendererKey;\n          messageRenderers[rendererKey] = shallowClonedRule.renderMessage;\n        }\n        return shallowClonedRule;\n      });\n      const activeErrorRules = activeRules.filter(r => r.level !== 'warning');\n      const activeWarningRules = activeRules.filter(r => r.level === 'warning');\n      const mergedPath = path !== null && path !== void 0 ? path : '__n_no_path__';\n      const validator = new Schema({\n        [mergedPath]: activeErrorRules\n      });\n      const warningValidator = new Schema({\n        [mergedPath]: activeWarningRules\n      });\n      const {\n        validateMessages\n      } = (NForm === null || NForm === void 0 ? void 0 : NForm.props) || {};\n      if (validateMessages) {\n        validator.messages(validateMessages);\n        warningValidator.messages(validateMessages);\n      }\n      const renderMessages = errors => {\n        renderExplainsRef.value = errors.map(error => {\n          const transformedMessage = (error === null || error === void 0 ? void 0 : error.message) || '';\n          return {\n            key: transformedMessage,\n            render: () => {\n              if (transformedMessage.startsWith('__renderMessage__')) {\n                return messageRenderers[transformedMessage]();\n              }\n              return transformedMessage;\n            }\n          };\n        });\n        errors.forEach(error => {\n          var _a;\n          if ((_a = error.message) === null || _a === void 0 ? void 0 : _a.startsWith('__renderMessage__')) {\n            error.message = originalMessageRendersMessage[error.message];\n          }\n        });\n      };\n      const validationResult = {\n        valid: true,\n        errors: undefined,\n        warnings: undefined\n      };\n      if (activeErrorRules.length) {\n        const errors = yield new Promise(resolve => {\n          void validator.validate({\n            [mergedPath]: value\n          }, options, resolve);\n        });\n        if (errors === null || errors === void 0 ? void 0 : errors.length) {\n          validationErroredRef.value = true;\n          validationResult.valid = false;\n          validationResult.errors = errors;\n          renderMessages(errors);\n        }\n      }\n      // if there are already errors, warning check can be skipped\n      if (activeWarningRules.length && !validationResult.errors) {\n        const warnings = yield new Promise(resolve => {\n          void warningValidator.validate({\n            [mergedPath]: value\n          }, options, resolve);\n        });\n        if (warnings === null || warnings === void 0 ? void 0 : warnings.length) {\n          renderMessages(warnings);\n          validationWarnedRef.value = true;\n          validationResult.warnings = warnings;\n        }\n      }\n      if (activeErrorRules.length + activeWarningRules.length > 0 && !validationResult.errors && !validationResult.warnings) {\n        restoreValidation();\n      }\n      return validationResult;\n    });\n    provide(formItemInjectionKey, {\n      path: toRef(props, 'path'),\n      disabled: mergedDisabledRef,\n      mergedSize: formItemSizeRefs.mergedSize,\n      mergedValidationStatus: formItemMiscRefs.mergedValidationStatus,\n      restoreValidation,\n      handleContentBlur,\n      handleContentChange,\n      handleContentFocus,\n      handleContentInput\n    });\n    const exposedRef = {\n      validate,\n      restoreValidation,\n      internalValidate\n    };\n    const labelElementRef = ref(null);\n    onMounted(() => {\n      if (!formItemMiscRefs.isAutoLabelWidth.value) return;\n      const labelElement = labelElementRef.value;\n      if (labelElement !== null) {\n        const memoizedWhitespace = labelElement.style.whiteSpace;\n        labelElement.style.whiteSpace = 'nowrap';\n        labelElement.style.width = '';\n        NForm === null || NForm === void 0 ? void 0 : NForm.deriveMaxChildLabelWidth(Number(getComputedStyle(labelElement).width.slice(0, -2)));\n        labelElement.style.whiteSpace = memoizedWhitespace;\n      }\n    });\n    const cssVarsRef = computed(() => {\n      var _a;\n      const {\n        value: size\n      } = mergedSizeRef;\n      const {\n        value: labelPlacement\n      } = labelPlacementRef;\n      const direction = labelPlacement === 'top' ? 'vertical' : 'horizontal';\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          labelTextColor,\n          asteriskColor,\n          lineHeight,\n          feedbackTextColor,\n          feedbackTextColorWarning,\n          feedbackTextColorError,\n          feedbackPadding,\n          labelFontWeight,\n          [createKey('labelHeight', size)]: labelHeight,\n          [createKey('blankHeight', size)]: blankHeight,\n          [createKey('feedbackFontSize', size)]: feedbackFontSize,\n          [createKey('feedbackHeight', size)]: feedbackHeight,\n          [createKey('labelPadding', direction)]: labelPadding,\n          [createKey('labelTextAlign', direction)]: labelTextAlign,\n          [createKey(createKey('labelFontSize', labelPlacement), size)]: labelFontSize\n        }\n      } = themeRef.value;\n      let mergedLabelTextAlign = (_a = labelTextAlignRef.value) !== null && _a !== void 0 ? _a : labelTextAlign;\n      if (labelPlacement === 'top') {\n        mergedLabelTextAlign = mergedLabelTextAlign === 'right' ? 'flex-end' : 'flex-start';\n      }\n      const cssVars = {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-line-height': lineHeight,\n        '--n-blank-height': blankHeight,\n        '--n-label-font-size': labelFontSize,\n        '--n-label-text-align': mergedLabelTextAlign,\n        '--n-label-height': labelHeight,\n        '--n-label-padding': labelPadding,\n        '--n-label-font-weight': labelFontWeight,\n        '--n-asterisk-color': asteriskColor,\n        '--n-label-text-color': labelTextColor,\n        '--n-feedback-padding': feedbackPadding,\n        '--n-feedback-font-size': feedbackFontSize,\n        '--n-feedback-height': feedbackHeight,\n        '--n-feedback-text-color': feedbackTextColor,\n        '--n-feedback-text-color-warning': feedbackTextColorWarning,\n        '--n-feedback-text-color-error': feedbackTextColorError\n      };\n      return cssVars;\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('form-item', computed(() => {\n      var _a;\n      return `${mergedSizeRef.value[0]}${labelPlacementRef.value[0]}${((_a = labelTextAlignRef.value) === null || _a === void 0 ? void 0 : _a[0]) || ''}`;\n    }), cssVarsRef, props) : undefined;\n    const reverseColSpaceRef = computed(() => {\n      // label placement left\n      // require-mark-placement | label align | areas (1fr auto)\n      // left                   | left        | mark text (need reverse)\n      // left                   | right       | mark text (okay)\n      // right                  | left        | mark text (okay)\n      // right                  | right       | mark text (okay)\n      // right-hanging          | left        | text mark (okay)\n      // right-hanging          | right       | text mark (okay)\n      return labelPlacementRef.value === 'left' && mergedRequireMarkPlacementRef.value === 'left' && labelTextAlignRef.value === 'left';\n    });\n    return Object.assign(Object.assign(Object.assign(Object.assign({\n      labelElementRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedRequired: mergedRequiredRef,\n      feedbackId: feedbackIdRef,\n      renderExplains: renderExplainsRef,\n      reverseColSpace: reverseColSpaceRef\n    }, formItemMiscRefs), formItemSizeRefs), exposedRef), {\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    });\n  },\n  render() {\n    const {\n      $slots,\n      mergedClsPrefix,\n      mergedShowLabel,\n      mergedShowRequireMark,\n      mergedRequireMarkPlacement,\n      onRender\n    } = this;\n    const renderedShowRequireMark = mergedShowRequireMark !== undefined ? mergedShowRequireMark : this.mergedRequired;\n    onRender === null || onRender === void 0 ? void 0 : onRender();\n    const renderLabel = () => {\n      const labelText = this.$slots.label ? this.$slots.label() : this.label;\n      if (!labelText) return null;\n      const textNode = h(\"span\", {\n        class: `${mergedClsPrefix}-form-item-label__text`\n      }, labelText);\n      const markNode = renderedShowRequireMark ? h(\"span\", {\n        class: `${mergedClsPrefix}-form-item-label__asterisk`\n      }, mergedRequireMarkPlacement !== 'left' ? '\\u00A0*' : '*\\u00A0') : mergedRequireMarkPlacement === 'right-hanging' && h(\"span\", {\n        class: `${mergedClsPrefix}-form-item-label__asterisk-placeholder`\n      }, '\\u00A0*');\n      const {\n        labelProps\n      } = this;\n      return h(\"label\", Object.assign({}, labelProps, {\n        class: [labelProps === null || labelProps === void 0 ? void 0 : labelProps.class, `${mergedClsPrefix}-form-item-label`, `${mergedClsPrefix}-form-item-label--${mergedRequireMarkPlacement}-mark`, this.reverseColSpace && `${mergedClsPrefix}-form-item-label--reverse-columns-space`],\n        style: this.mergedLabelStyle,\n        ref: \"labelElementRef\"\n      }), mergedRequireMarkPlacement === 'left' ? [markNode, textNode] : [textNode, markNode]);\n    };\n    return h(\"div\", {\n      class: [`${mergedClsPrefix}-form-item`, this.themeClass, `${mergedClsPrefix}-form-item--${this.mergedSize}-size`, `${mergedClsPrefix}-form-item--${this.mergedLabelPlacement}-labelled`, this.isAutoLabelWidth && `${mergedClsPrefix}-form-item--auto-label-width`, !mergedShowLabel && `${mergedClsPrefix}-form-item--no-label`],\n      style: this.cssVars\n    }, mergedShowLabel && renderLabel(), h(\"div\", {\n      class: [`${mergedClsPrefix}-form-item-blank`, this.mergedValidationStatus && `${mergedClsPrefix}-form-item-blank--${this.mergedValidationStatus}`]\n    }, $slots), this.mergedShowFeedback ? h(\"div\", {\n      key: this.feedbackId,\n      class: `${mergedClsPrefix}-form-item-feedback-wrapper`\n    }, h(Transition, {\n      name: \"fade-down-transition\",\n      mode: \"out-in\"\n    }, {\n      default: () => {\n        const {\n          mergedValidationStatus\n        } = this;\n        return resolveWrappedSlot($slots.feedback, children => {\n          var _a;\n          const {\n            feedback\n          } = this;\n          const feedbackNodes = children || feedback ? h(\"div\", {\n            key: \"__feedback__\",\n            class: `${mergedClsPrefix}-form-item-feedback__line`\n          }, children || feedback) : this.renderExplains.length ? (_a = this.renderExplains) === null || _a === void 0 ? void 0 : _a.map(({\n            key,\n            render\n          }) => h(\"div\", {\n            key: key,\n            class: `${mergedClsPrefix}-form-item-feedback__line`\n          }, render())) : null;\n          return feedbackNodes ? mergedValidationStatus === 'warning' ? h(\"div\", {\n            key: \"controlled-warning\",\n            class: `${mergedClsPrefix}-form-item-feedback ${mergedClsPrefix}-form-item-feedback--warning`\n          }, feedbackNodes) : mergedValidationStatus === 'error' ? h(\"div\", {\n            key: \"controlled-error\",\n            class: `${mergedClsPrefix}-form-item-feedback ${mergedClsPrefix}-form-item-feedback--error`\n          }, feedbackNodes) : mergedValidationStatus === 'success' ? h(\"div\", {\n            key: \"controlled-success\",\n            class: `${mergedClsPrefix}-form-item-feedback ${mergedClsPrefix}-form-item-feedback--success`\n          }, feedbackNodes) : h(\"div\", {\n            key: \"controlled-default\",\n            class: `${mergedClsPrefix}-form-item-feedback`\n          }, feedbackNodes) : null;\n        });\n      }\n    })) : null);\n  }\n});","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","h","defineComponent","computed","toRef","ref","provide","inject","watch","Transition","onMounted","Schema","get","createId","formItemInjectionKey","useConfig","useTheme","useThemeClass","warn","createKey","useInjectionInstanceCollection","keysOf","resolveWrappedSlot","formLight","formItemMisc","formItemSize","formItemRule","formInjectionKey","formItemInstsInjectionKey","style","formItemProps","Object","assign","props","label","String","labelWidth","Number","labelStyle","labelAlign","labelPlacement","path","first","Boolean","rulePath","required","showRequireMark","type","default","undefined","requireMarkPlacement","showFeedback","rule","Array","size","ignorePathChange","validationStatus","feedback","showLabel","labelProps","formItemPropKeys","wrapValidator","validator","async","args","validateResult","Error","isArray","err","console","error","name","setup","mergedClsPrefixRef","inlineThemeDisabled","NForm","formItemSizeRefs","formItemMiscRefs","validationErrored","validationErroredRef","validationWarned","validationWarnedRef","mergedRequired","mergedRequiredRef","mergedRules","mergedRulesRef","mergedSize","mergedSizeRef","mergedLabelPlacement","labelPlacementRef","mergedLabelAlign","labelTextAlignRef","mergedRequireMarkPlacement","mergedRequireMarkPlacementRef","renderExplainsRef","feedbackIdRef","mergedDisabledRef","themeRef","restoreValidation","handleContentBlur","internalValidate","handleContentChange","handleContentFocus","handleContentInput","validate","options","callback","trigger","validateCallback","shouldRuleBeApplied","asyncValidatorOptions","valid","errors","warnings","suppressWarning","rules","model","messageRenderers","originalMessageRendersMessage","activeRules","filter","includes","map","i","shallowClonedRule","asyncValidator","renderMessage","rendererKey","message","activeErrorRules","r","level","activeWarningRules","mergedPath","warningValidator","validateMessages","messages","renderMessages","transformedMessage","key","render","startsWith","forEach","_a","validationResult","length","disabled","mergedValidationStatus","exposedRef","labelElementRef","isAutoLabelWidth","labelElement","memoizedWhitespace","whiteSpace","width","deriveMaxChildLabelWidth","getComputedStyle","slice","cssVarsRef","direction","common","cubicBezierEaseInOut","self","labelTextColor","asteriskColor","lineHeight","feedbackTextColor","feedbackTextColorWarning","feedbackTextColorError","feedbackPadding","labelFontWeight","labelHeight","blankHeight","feedbackFontSize","feedbackHeight","labelPadding","labelTextAlign","labelFontSize","mergedLabelTextAlign","cssVars","themeClassHandle","reverseColSpaceRef","mergedClsPrefix","feedbackId","renderExplains","reverseColSpace","themeClass","onRender","$slots","mergedShowLabel","mergedShowRequireMark","renderedShowRequireMark","renderLabel","labelText","textNode","class","markNode","mergedLabelStyle","mergedShowFeedback","mode","children","feedbackNodes"],"sources":["E:/java项目/blog/blog-front/node_modules/naive-ui/es/form/src/FormItem.mjs"],"sourcesContent":["var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { h, defineComponent, computed, toRef, ref, provide, inject, watch, Transition, onMounted } from 'vue';\nimport Schema from 'async-validator';\nimport { get } from 'lodash-es';\nimport { createId } from 'seemly';\nimport { formItemInjectionKey } from \"../../_mixins/use-form-item.mjs\";\nimport { useConfig, useTheme, useThemeClass } from \"../../_mixins/index.mjs\";\nimport { warn, createKey, useInjectionInstanceCollection, keysOf, resolveWrappedSlot } from \"../../_utils/index.mjs\";\nimport { formLight } from \"../styles/index.mjs\";\nimport { formItemMisc, formItemSize, formItemRule } from \"./utils.mjs\";\nimport { formInjectionKey, formItemInstsInjectionKey } from \"./context.mjs\";\nimport style from \"./styles/form-item.cssr.mjs\";\nexport const formItemProps = Object.assign(Object.assign({}, useTheme.props), {\n  label: String,\n  labelWidth: [Number, String],\n  labelStyle: [String, Object],\n  labelAlign: String,\n  labelPlacement: String,\n  path: String,\n  first: Boolean,\n  rulePath: String,\n  required: Boolean,\n  showRequireMark: {\n    type: Boolean,\n    default: undefined\n  },\n  requireMarkPlacement: String,\n  showFeedback: {\n    type: Boolean,\n    default: undefined\n  },\n  rule: [Object, Array],\n  size: String,\n  ignorePathChange: Boolean,\n  validationStatus: String,\n  feedback: String,\n  showLabel: {\n    type: Boolean,\n    default: undefined\n  },\n  labelProps: Object\n});\nexport const formItemPropKeys = keysOf(formItemProps);\n// wrap sync validator\nfunction wrapValidator(validator, async) {\n  return (...args) => {\n    try {\n      const validateResult = validator(...args);\n      if (!async && (typeof validateResult === 'boolean' || validateResult instanceof Error || Array.isArray(validateResult)) || (\n      // Error[]\n      validateResult === null || validateResult === void 0 ? void 0 : validateResult.then)) {\n        return validateResult;\n      } else if (validateResult === undefined) {\n        return true;\n      } else {\n        warn('form-item/validate', `You return a ${typeof validateResult} ` + 'typed value in the validator method, which is not recommended. Please use ' + (async ? '`Promise`' : '`boolean`, `Error` or `Promise`') + ' typed value instead.');\n        return true;\n      }\n    } catch (err) {\n      warn('form-item/validate', 'An error is catched in the validation, ' + \"so the validation won't be done. Your callback in `validate` method of \" + \"`n-form` or `n-form-item` won't be called in this validation.\");\n      console.error(err);\n      // If returns undefined, async-validator won't trigger callback\n      // so the result will be abandoned, which means not true and not false\n      return undefined;\n    }\n  };\n}\nexport default defineComponent({\n  name: 'FormItem',\n  props: formItemProps,\n  setup(props) {\n    useInjectionInstanceCollection(formItemInstsInjectionKey, 'formItems', toRef(props, 'path'));\n    const {\n      mergedClsPrefixRef,\n      inlineThemeDisabled\n    } = useConfig(props);\n    const NForm = inject(formInjectionKey, null);\n    const formItemSizeRefs = formItemSize(props);\n    const formItemMiscRefs = formItemMisc(props);\n    const {\n      validationErrored: validationErroredRef,\n      validationWarned: validationWarnedRef\n    } = formItemMiscRefs;\n    const {\n      mergedRequired: mergedRequiredRef,\n      mergedRules: mergedRulesRef\n    } = formItemRule(props);\n    const {\n      mergedSize: mergedSizeRef\n    } = formItemSizeRefs;\n    const {\n      mergedLabelPlacement: labelPlacementRef,\n      mergedLabelAlign: labelTextAlignRef,\n      mergedRequireMarkPlacement: mergedRequireMarkPlacementRef\n    } = formItemMiscRefs;\n    const renderExplainsRef = ref([]);\n    const feedbackIdRef = ref(createId());\n    const mergedDisabledRef = NForm ? toRef(NForm.props, 'disabled') : ref(false);\n    const themeRef = useTheme('Form', '-form-item', style, formLight, props, mergedClsPrefixRef);\n    watch(toRef(props, 'path'), () => {\n      if (props.ignorePathChange) return;\n      restoreValidation();\n    });\n    function restoreValidation() {\n      renderExplainsRef.value = [];\n      validationErroredRef.value = false;\n      validationWarnedRef.value = false;\n      if (props.feedback) {\n        feedbackIdRef.value = createId();\n      }\n    }\n    function handleContentBlur() {\n      void internalValidate('blur');\n    }\n    function handleContentChange() {\n      void internalValidate('change');\n    }\n    function handleContentFocus() {\n      void internalValidate('focus');\n    }\n    function handleContentInput() {\n      void internalValidate('input');\n    }\n    function validate(options, callback) {\n      return __awaiter(this, void 0, void 0, function* () {\n        /** the following code is for compatibility */\n        let trigger;\n        let validateCallback;\n        let shouldRuleBeApplied;\n        let asyncValidatorOptions;\n        if (typeof options === 'string') {\n          trigger = options;\n          validateCallback = callback;\n        } else if (options !== null && typeof options === 'object') {\n          trigger = options.trigger;\n          validateCallback = options.callback;\n          shouldRuleBeApplied = options.shouldRuleBeApplied;\n          asyncValidatorOptions = options.options;\n        }\n        return yield new Promise((resolve, reject) => {\n          void internalValidate(trigger, shouldRuleBeApplied, asyncValidatorOptions).then(({\n            valid,\n            errors,\n            warnings\n          }) => {\n            if (valid) {\n              if (validateCallback) {\n                validateCallback(undefined, {\n                  warnings\n                });\n              }\n              resolve({\n                warnings\n              });\n            } else {\n              if (validateCallback) {\n                validateCallback(errors, {\n                  warnings\n                });\n              }\n              reject(errors);\n            }\n          });\n        });\n      });\n    }\n    const internalValidate = (trigger = null, shouldRuleBeApplied = () => true, options = {\n      suppressWarning: true\n    }) => __awaiter(this, void 0, void 0, function* () {\n      const {\n        path\n      } = props;\n      if (!options) {\n        options = {};\n      } else {\n        if (!options.first) options.first = props.first;\n      }\n      const {\n        value: rules\n      } = mergedRulesRef;\n      const value = NForm ? get(NForm.props.model, path || '') : undefined;\n      const messageRenderers = {};\n      const originalMessageRendersMessage = {};\n      const activeRules = (!trigger ? rules : rules.filter(rule => {\n        if (Array.isArray(rule.trigger)) {\n          return rule.trigger.includes(trigger);\n        } else {\n          return rule.trigger === trigger;\n        }\n      })).filter(shouldRuleBeApplied).map((rule, i) => {\n        const shallowClonedRule = Object.assign({}, rule);\n        if (shallowClonedRule.validator) {\n          shallowClonedRule.validator = wrapValidator(shallowClonedRule.validator, false);\n        }\n        if (shallowClonedRule.asyncValidator) {\n          shallowClonedRule.asyncValidator = wrapValidator(shallowClonedRule.asyncValidator, true);\n        }\n        if (shallowClonedRule.renderMessage) {\n          const rendererKey = `__renderMessage__${i}`;\n          originalMessageRendersMessage[rendererKey] = shallowClonedRule.message;\n          shallowClonedRule.message = rendererKey;\n          messageRenderers[rendererKey] = shallowClonedRule.renderMessage;\n        }\n        return shallowClonedRule;\n      });\n      const activeErrorRules = activeRules.filter(r => r.level !== 'warning');\n      const activeWarningRules = activeRules.filter(r => r.level === 'warning');\n      const mergedPath = path !== null && path !== void 0 ? path : '__n_no_path__';\n      const validator = new Schema({\n        [mergedPath]: activeErrorRules\n      });\n      const warningValidator = new Schema({\n        [mergedPath]: activeWarningRules\n      });\n      const {\n        validateMessages\n      } = (NForm === null || NForm === void 0 ? void 0 : NForm.props) || {};\n      if (validateMessages) {\n        validator.messages(validateMessages);\n        warningValidator.messages(validateMessages);\n      }\n      const renderMessages = errors => {\n        renderExplainsRef.value = errors.map(error => {\n          const transformedMessage = (error === null || error === void 0 ? void 0 : error.message) || '';\n          return {\n            key: transformedMessage,\n            render: () => {\n              if (transformedMessage.startsWith('__renderMessage__')) {\n                return messageRenderers[transformedMessage]();\n              }\n              return transformedMessage;\n            }\n          };\n        });\n        errors.forEach(error => {\n          var _a;\n          if ((_a = error.message) === null || _a === void 0 ? void 0 : _a.startsWith('__renderMessage__')) {\n            error.message = originalMessageRendersMessage[error.message];\n          }\n        });\n      };\n      const validationResult = {\n        valid: true,\n        errors: undefined,\n        warnings: undefined\n      };\n      if (activeErrorRules.length) {\n        const errors = yield new Promise(resolve => {\n          void validator.validate({\n            [mergedPath]: value\n          }, options, resolve);\n        });\n        if (errors === null || errors === void 0 ? void 0 : errors.length) {\n          validationErroredRef.value = true;\n          validationResult.valid = false;\n          validationResult.errors = errors;\n          renderMessages(errors);\n        }\n      }\n      // if there are already errors, warning check can be skipped\n      if (activeWarningRules.length && !validationResult.errors) {\n        const warnings = yield new Promise(resolve => {\n          void warningValidator.validate({\n            [mergedPath]: value\n          }, options, resolve);\n        });\n        if (warnings === null || warnings === void 0 ? void 0 : warnings.length) {\n          renderMessages(warnings);\n          validationWarnedRef.value = true;\n          validationResult.warnings = warnings;\n        }\n      }\n      if (activeErrorRules.length + activeWarningRules.length > 0 && !validationResult.errors && !validationResult.warnings) {\n        restoreValidation();\n      }\n      return validationResult;\n    });\n    provide(formItemInjectionKey, {\n      path: toRef(props, 'path'),\n      disabled: mergedDisabledRef,\n      mergedSize: formItemSizeRefs.mergedSize,\n      mergedValidationStatus: formItemMiscRefs.mergedValidationStatus,\n      restoreValidation,\n      handleContentBlur,\n      handleContentChange,\n      handleContentFocus,\n      handleContentInput\n    });\n    const exposedRef = {\n      validate,\n      restoreValidation,\n      internalValidate\n    };\n    const labelElementRef = ref(null);\n    onMounted(() => {\n      if (!formItemMiscRefs.isAutoLabelWidth.value) return;\n      const labelElement = labelElementRef.value;\n      if (labelElement !== null) {\n        const memoizedWhitespace = labelElement.style.whiteSpace;\n        labelElement.style.whiteSpace = 'nowrap';\n        labelElement.style.width = '';\n        NForm === null || NForm === void 0 ? void 0 : NForm.deriveMaxChildLabelWidth(Number(getComputedStyle(labelElement).width.slice(0, -2)));\n        labelElement.style.whiteSpace = memoizedWhitespace;\n      }\n    });\n    const cssVarsRef = computed(() => {\n      var _a;\n      const {\n        value: size\n      } = mergedSizeRef;\n      const {\n        value: labelPlacement\n      } = labelPlacementRef;\n      const direction = labelPlacement === 'top' ? 'vertical' : 'horizontal';\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          labelTextColor,\n          asteriskColor,\n          lineHeight,\n          feedbackTextColor,\n          feedbackTextColorWarning,\n          feedbackTextColorError,\n          feedbackPadding,\n          labelFontWeight,\n          [createKey('labelHeight', size)]: labelHeight,\n          [createKey('blankHeight', size)]: blankHeight,\n          [createKey('feedbackFontSize', size)]: feedbackFontSize,\n          [createKey('feedbackHeight', size)]: feedbackHeight,\n          [createKey('labelPadding', direction)]: labelPadding,\n          [createKey('labelTextAlign', direction)]: labelTextAlign,\n          [createKey(createKey('labelFontSize', labelPlacement), size)]: labelFontSize\n        }\n      } = themeRef.value;\n      let mergedLabelTextAlign = (_a = labelTextAlignRef.value) !== null && _a !== void 0 ? _a : labelTextAlign;\n      if (labelPlacement === 'top') {\n        mergedLabelTextAlign = mergedLabelTextAlign === 'right' ? 'flex-end' : 'flex-start';\n      }\n      const cssVars = {\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-line-height': lineHeight,\n        '--n-blank-height': blankHeight,\n        '--n-label-font-size': labelFontSize,\n        '--n-label-text-align': mergedLabelTextAlign,\n        '--n-label-height': labelHeight,\n        '--n-label-padding': labelPadding,\n        '--n-label-font-weight': labelFontWeight,\n        '--n-asterisk-color': asteriskColor,\n        '--n-label-text-color': labelTextColor,\n        '--n-feedback-padding': feedbackPadding,\n        '--n-feedback-font-size': feedbackFontSize,\n        '--n-feedback-height': feedbackHeight,\n        '--n-feedback-text-color': feedbackTextColor,\n        '--n-feedback-text-color-warning': feedbackTextColorWarning,\n        '--n-feedback-text-color-error': feedbackTextColorError\n      };\n      return cssVars;\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('form-item', computed(() => {\n      var _a;\n      return `${mergedSizeRef.value[0]}${labelPlacementRef.value[0]}${((_a = labelTextAlignRef.value) === null || _a === void 0 ? void 0 : _a[0]) || ''}`;\n    }), cssVarsRef, props) : undefined;\n    const reverseColSpaceRef = computed(() => {\n      // label placement left\n      // require-mark-placement | label align | areas (1fr auto)\n      // left                   | left        | mark text (need reverse)\n      // left                   | right       | mark text (okay)\n      // right                  | left        | mark text (okay)\n      // right                  | right       | mark text (okay)\n      // right-hanging          | left        | text mark (okay)\n      // right-hanging          | right       | text mark (okay)\n      return labelPlacementRef.value === 'left' && mergedRequireMarkPlacementRef.value === 'left' && labelTextAlignRef.value === 'left';\n    });\n    return Object.assign(Object.assign(Object.assign(Object.assign({\n      labelElementRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedRequired: mergedRequiredRef,\n      feedbackId: feedbackIdRef,\n      renderExplains: renderExplainsRef,\n      reverseColSpace: reverseColSpaceRef\n    }, formItemMiscRefs), formItemSizeRefs), exposedRef), {\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    });\n  },\n  render() {\n    const {\n      $slots,\n      mergedClsPrefix,\n      mergedShowLabel,\n      mergedShowRequireMark,\n      mergedRequireMarkPlacement,\n      onRender\n    } = this;\n    const renderedShowRequireMark = mergedShowRequireMark !== undefined ? mergedShowRequireMark : this.mergedRequired;\n    onRender === null || onRender === void 0 ? void 0 : onRender();\n    const renderLabel = () => {\n      const labelText = this.$slots.label ? this.$slots.label() : this.label;\n      if (!labelText) return null;\n      const textNode = h(\"span\", {\n        class: `${mergedClsPrefix}-form-item-label__text`\n      }, labelText);\n      const markNode = renderedShowRequireMark ? h(\"span\", {\n        class: `${mergedClsPrefix}-form-item-label__asterisk`\n      }, mergedRequireMarkPlacement !== 'left' ? '\\u00A0*' : '*\\u00A0') : mergedRequireMarkPlacement === 'right-hanging' && h(\"span\", {\n        class: `${mergedClsPrefix}-form-item-label__asterisk-placeholder`\n      }, '\\u00A0*');\n      const {\n        labelProps\n      } = this;\n      return h(\"label\", Object.assign({}, labelProps, {\n        class: [labelProps === null || labelProps === void 0 ? void 0 : labelProps.class, `${mergedClsPrefix}-form-item-label`, `${mergedClsPrefix}-form-item-label--${mergedRequireMarkPlacement}-mark`, this.reverseColSpace && `${mergedClsPrefix}-form-item-label--reverse-columns-space`],\n        style: this.mergedLabelStyle,\n        ref: \"labelElementRef\"\n      }), mergedRequireMarkPlacement === 'left' ? [markNode, textNode] : [textNode, markNode]);\n    };\n    return h(\"div\", {\n      class: [`${mergedClsPrefix}-form-item`, this.themeClass, `${mergedClsPrefix}-form-item--${this.mergedSize}-size`, `${mergedClsPrefix}-form-item--${this.mergedLabelPlacement}-labelled`, this.isAutoLabelWidth && `${mergedClsPrefix}-form-item--auto-label-width`, !mergedShowLabel && `${mergedClsPrefix}-form-item--no-label`],\n      style: this.cssVars\n    }, mergedShowLabel && renderLabel(), h(\"div\", {\n      class: [`${mergedClsPrefix}-form-item-blank`, this.mergedValidationStatus && `${mergedClsPrefix}-form-item-blank--${this.mergedValidationStatus}`]\n    }, $slots), this.mergedShowFeedback ? h(\"div\", {\n      key: this.feedbackId,\n      class: `${mergedClsPrefix}-form-item-feedback-wrapper`\n    }, h(Transition, {\n      name: \"fade-down-transition\",\n      mode: \"out-in\"\n    }, {\n      default: () => {\n        const {\n          mergedValidationStatus\n        } = this;\n        return resolveWrappedSlot($slots.feedback, children => {\n          var _a;\n          const {\n            feedback\n          } = this;\n          const feedbackNodes = children || feedback ? h(\"div\", {\n            key: \"__feedback__\",\n            class: `${mergedClsPrefix}-form-item-feedback__line`\n          }, children || feedback) : this.renderExplains.length ? (_a = this.renderExplains) === null || _a === void 0 ? void 0 : _a.map(({\n            key,\n            render\n          }) => h(\"div\", {\n            key: key,\n            class: `${mergedClsPrefix}-form-item-feedback__line`\n          }, render())) : null;\n          return feedbackNodes ? mergedValidationStatus === 'warning' ? h(\"div\", {\n            key: \"controlled-warning\",\n            class: `${mergedClsPrefix}-form-item-feedback ${mergedClsPrefix}-form-item-feedback--warning`\n          }, feedbackNodes) : mergedValidationStatus === 'error' ? h(\"div\", {\n            key: \"controlled-error\",\n            class: `${mergedClsPrefix}-form-item-feedback ${mergedClsPrefix}-form-item-feedback--error`\n          }, feedbackNodes) : mergedValidationStatus === 'success' ? h(\"div\", {\n            key: \"controlled-success\",\n            class: `${mergedClsPrefix}-form-item-feedback ${mergedClsPrefix}-form-item-feedback--success`\n          }, feedbackNodes) : h(\"div\", {\n            key: \"controlled-default\",\n            class: `${mergedClsPrefix}-form-item-feedback`\n          }, feedbackNodes) : null;\n        });\n      }\n    })) : null);\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}