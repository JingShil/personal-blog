{"ast":null,"code":"import { h, ref, defineComponent, inject, Transition, withDirectives } from 'vue';\nimport { clickoutside } from 'vdirs';\nimport FocusDetector from \"../../_internal/focus-detector/index.mjs\";\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from \"../../_utils/index.mjs\";\nimport { NEmpty } from \"../../empty/index.mjs\";\nimport { NBaseMenuMask } from \"../../_internal/index.mjs\";\nimport NCascaderSubmenu from \"./CascaderSubmenu.mjs\";\nimport { cascaderInjectionKey } from \"./interface.mjs\";\nexport default defineComponent({\n  name: 'NCascaderMenu',\n  props: {\n    value: [String, Number, Array],\n    placement: {\n      type: String,\n      default: 'bottom-start'\n    },\n    show: Boolean,\n    menuModel: {\n      type: Array,\n      required: true\n    },\n    loading: Boolean,\n    onFocus: {\n      type: Function,\n      required: true\n    },\n    onBlur: {\n      type: Function,\n      required: true\n    },\n    onKeydown: {\n      type: Function,\n      required: true\n    },\n    onMousedown: {\n      type: Function,\n      required: true\n    },\n    onTabout: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const {\n      localeRef,\n      isMountedRef,\n      mergedClsPrefixRef,\n      syncCascaderMenuPosition,\n      handleCascaderMenuClickOutside,\n      mergedThemeRef\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(cascaderInjectionKey);\n    const submenuInstRefs = [];\n    const maskInstRef = ref(null);\n    const selfElRef = ref(null);\n    function handleResize() {\n      syncCascaderMenuPosition();\n    }\n    useOnResize(selfElRef, handleResize);\n    function showErrorMessage(label) {\n      var _a;\n      const {\n        value: {\n          loadingRequiredMessage\n        }\n      } = localeRef;\n      (_a = maskInstRef.value) === null || _a === void 0 ? void 0 : _a.showOnce(loadingRequiredMessage(label));\n    }\n    function handleClickOutside(e) {\n      handleCascaderMenuClickOutside(e);\n    }\n    function handleFocusin(e) {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n      if (!selfEl.contains(e.relatedTarget)) {\n        props.onFocus(e);\n      }\n    }\n    function handleFocusout(e) {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n      if (!selfEl.contains(e.relatedTarget)) {\n        props.onBlur(e);\n      }\n    }\n    const exposedRef = {\n      scroll(depth, index, elSize) {\n        const submenuInst = submenuInstRefs[depth];\n        if (submenuInst) {\n          submenuInst.scroll(index, elSize);\n        }\n      },\n      showErrorMessage\n    };\n    return Object.assign({\n      isMounted: isMountedRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      selfElRef,\n      submenuInstRefs,\n      maskInstRef,\n      mergedTheme: mergedThemeRef,\n      handleFocusin,\n      handleFocusout,\n      handleClickOutside\n    }, exposedRef);\n  },\n  render() {\n    const {\n      submenuInstRefs,\n      mergedClsPrefix,\n      mergedTheme\n    } = this;\n    return h(Transition, {\n      name: \"fade-in-scale-up-transition\",\n      appear: this.isMounted\n    }, {\n      default: () => {\n        if (!this.show) return null;\n        return withDirectives(h(\"div\", {\n          tabindex: \"0\",\n          ref: \"selfElRef\",\n          class: `${mergedClsPrefix}-cascader-menu`,\n          onMousedown: this.onMousedown,\n          onFocusin: this.handleFocusin,\n          onFocusout: this.handleFocusout,\n          onKeydown: this.onKeydown\n        }, this.menuModel[0].length ? h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-submenu-wrapper`\n        }, this.menuModel.map((submenuOptions, index) => h(NCascaderSubmenu, {\n          ref: instance => {\n            if (instance) {\n              submenuInstRefs[index] = instance;\n            }\n          },\n          key: index,\n          tmNodes: submenuOptions,\n          depth: index + 1\n        })), h(NBaseMenuMask, {\n          clsPrefix: mergedClsPrefix,\n          ref: \"maskInstRef\"\n        })) : h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-menu__empty`\n        }, resolveSlot(this.$slots.empty, () => [h(NEmpty, {\n          theme: mergedTheme.peers.Empty,\n          themeOverrides: mergedTheme.peerOverrides.Empty\n        })])), resolveWrappedSlot(this.$slots.action, children => children && h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-menu-action`,\n          \"data-action\": true\n        }, children)), h(FocusDetector, {\n          onFocus: this.onTabout\n        })), [[clickoutside, this.handleClickOutside, undefined, {\n          capture: true\n        }]]);\n      }\n    });\n  }\n});","map":{"version":3,"names":["h","ref","defineComponent","inject","Transition","withDirectives","clickoutside","FocusDetector","resolveSlot","resolveWrappedSlot","useOnResize","NEmpty","NBaseMenuMask","NCascaderSubmenu","cascaderInjectionKey","name","props","value","String","Number","Array","placement","type","default","show","Boolean","menuModel","required","loading","onFocus","Function","onBlur","onKeydown","onMousedown","onTabout","setup","localeRef","isMountedRef","mergedClsPrefixRef","syncCascaderMenuPosition","handleCascaderMenuClickOutside","mergedThemeRef","submenuInstRefs","maskInstRef","selfElRef","handleResize","showErrorMessage","label","_a","loadingRequiredMessage","showOnce","handleClickOutside","e","handleFocusin","selfEl","contains","relatedTarget","handleFocusout","exposedRef","scroll","depth","index","elSize","submenuInst","Object","assign","isMounted","mergedClsPrefix","mergedTheme","render","appear","tabindex","class","onFocusin","onFocusout","length","map","submenuOptions","instance","key","tmNodes","clsPrefix","$slots","empty","theme","peers","Empty","themeOverrides","peerOverrides","action","children","undefined","capture"],"sources":["E:/java项目/blog/blog-front/node_modules/naive-ui/es/cascader/src/CascaderMenu.mjs"],"sourcesContent":["import { h, ref, defineComponent, inject, Transition, withDirectives } from 'vue';\nimport { clickoutside } from 'vdirs';\nimport FocusDetector from \"../../_internal/focus-detector/index.mjs\";\nimport { resolveSlot, resolveWrappedSlot, useOnResize } from \"../../_utils/index.mjs\";\nimport { NEmpty } from \"../../empty/index.mjs\";\nimport { NBaseMenuMask } from \"../../_internal/index.mjs\";\nimport NCascaderSubmenu from \"./CascaderSubmenu.mjs\";\nimport { cascaderInjectionKey } from \"./interface.mjs\";\nexport default defineComponent({\n  name: 'NCascaderMenu',\n  props: {\n    value: [String, Number, Array],\n    placement: {\n      type: String,\n      default: 'bottom-start'\n    },\n    show: Boolean,\n    menuModel: {\n      type: Array,\n      required: true\n    },\n    loading: Boolean,\n    onFocus: {\n      type: Function,\n      required: true\n    },\n    onBlur: {\n      type: Function,\n      required: true\n    },\n    onKeydown: {\n      type: Function,\n      required: true\n    },\n    onMousedown: {\n      type: Function,\n      required: true\n    },\n    onTabout: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const {\n      localeRef,\n      isMountedRef,\n      mergedClsPrefixRef,\n      syncCascaderMenuPosition,\n      handleCascaderMenuClickOutside,\n      mergedThemeRef\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    } = inject(cascaderInjectionKey);\n    const submenuInstRefs = [];\n    const maskInstRef = ref(null);\n    const selfElRef = ref(null);\n    function handleResize() {\n      syncCascaderMenuPosition();\n    }\n    useOnResize(selfElRef, handleResize);\n    function showErrorMessage(label) {\n      var _a;\n      const {\n        value: {\n          loadingRequiredMessage\n        }\n      } = localeRef;\n      (_a = maskInstRef.value) === null || _a === void 0 ? void 0 : _a.showOnce(loadingRequiredMessage(label));\n    }\n    function handleClickOutside(e) {\n      handleCascaderMenuClickOutside(e);\n    }\n    function handleFocusin(e) {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n      if (!selfEl.contains(e.relatedTarget)) {\n        props.onFocus(e);\n      }\n    }\n    function handleFocusout(e) {\n      const {\n        value: selfEl\n      } = selfElRef;\n      if (!selfEl) return;\n      if (!selfEl.contains(e.relatedTarget)) {\n        props.onBlur(e);\n      }\n    }\n    const exposedRef = {\n      scroll(depth, index, elSize) {\n        const submenuInst = submenuInstRefs[depth];\n        if (submenuInst) {\n          submenuInst.scroll(index, elSize);\n        }\n      },\n      showErrorMessage\n    };\n    return Object.assign({\n      isMounted: isMountedRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      selfElRef,\n      submenuInstRefs,\n      maskInstRef,\n      mergedTheme: mergedThemeRef,\n      handleFocusin,\n      handleFocusout,\n      handleClickOutside\n    }, exposedRef);\n  },\n  render() {\n    const {\n      submenuInstRefs,\n      mergedClsPrefix,\n      mergedTheme\n    } = this;\n    return h(Transition, {\n      name: \"fade-in-scale-up-transition\",\n      appear: this.isMounted\n    }, {\n      default: () => {\n        if (!this.show) return null;\n        return withDirectives(h(\"div\", {\n          tabindex: \"0\",\n          ref: \"selfElRef\",\n          class: `${mergedClsPrefix}-cascader-menu`,\n          onMousedown: this.onMousedown,\n          onFocusin: this.handleFocusin,\n          onFocusout: this.handleFocusout,\n          onKeydown: this.onKeydown\n        }, this.menuModel[0].length ? h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-submenu-wrapper`\n        }, this.menuModel.map((submenuOptions, index) => h(NCascaderSubmenu, {\n          ref: instance => {\n            if (instance) {\n              submenuInstRefs[index] = instance;\n            }\n          },\n          key: index,\n          tmNodes: submenuOptions,\n          depth: index + 1\n        })), h(NBaseMenuMask, {\n          clsPrefix: mergedClsPrefix,\n          ref: \"maskInstRef\"\n        })) : h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-menu__empty`\n        }, resolveSlot(this.$slots.empty, () => [h(NEmpty, {\n          theme: mergedTheme.peers.Empty,\n          themeOverrides: mergedTheme.peerOverrides.Empty\n        })])), resolveWrappedSlot(this.$slots.action, children => children && h(\"div\", {\n          class: `${mergedClsPrefix}-cascader-menu-action`,\n          \"data-action\": true\n        }, children)), h(FocusDetector, {\n          onFocus: this.onTabout\n        })), [[clickoutside, this.handleClickOutside, undefined, {\n          capture: true\n        }]]);\n      }\n    });\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}