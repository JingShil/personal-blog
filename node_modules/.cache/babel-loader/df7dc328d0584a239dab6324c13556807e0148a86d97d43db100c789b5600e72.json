{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createVNode as _createVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/imgs/目录2.svg';\nimport _imports_1 from '../../assets/imgs/微信.svg';\nimport _imports_2 from '../../assets/imgs/QQ.svg';\nimport _imports_3 from '../../assets/imgs/github.svg';\nimport _imports_4 from '../../assets/imgs/邮箱.svg';\nimport _imports_5 from '@/assets/imgs/标签2.svg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-2d3ca9ba\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"blog-body\"\n};\nconst _hoisted_2 = {\n  class: \"blog-left\"\n};\nconst _hoisted_3 = {\n  class: \"blog-catalog\"\n};\nconst _hoisted_4 = {\n  class: \"blog-catalog-head\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0\n}, null, -1));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"目录\", -1));\nconst _hoisted_7 = {\n  class: \"blog-catalog-progress\"\n};\nconst _hoisted_8 = {\n  class: \"blog-catalog-main\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"blog-catalog-line\"\n}, null, -1));\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  class: \"blog-center\"\n};\nconst _hoisted_12 = {\n  class: \"blog-title\"\n};\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"vditor\",\n  class: \"blog-content\"\n}, null, -1));\nconst _hoisted_14 = {\n  class: \"blog-comment\"\n};\nconst _hoisted_15 = {\n  class: \"blog-right\"\n};\nconst _hoisted_16 = {\n  class: \"blog-user\"\n};\nconst _hoisted_17 = {\n  class: \"blog-user-basic\"\n};\nconst _hoisted_18 = [\"src\"];\nconst _hoisted_19 = {\n  style: {\n    \"margin-top\": \"10px\"\n  }\n};\nconst _hoisted_20 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"blog-user-link\\\" data-v-2d3ca9ba><div class=\\\"blog-user-link-item\\\" data-v-2d3ca9ba><img src=\\\"\" + _imports_1 + \"\\\" data-v-2d3ca9ba></div><div class=\\\"blog-user-link-item\\\" data-v-2d3ca9ba><img src=\\\"\" + _imports_2 + \"\\\" data-v-2d3ca9ba></div><div class=\\\"blog-user-link-item\\\" data-v-2d3ca9ba><img src=\\\"\" + _imports_3 + \"\\\" data-v-2d3ca9ba></div><div class=\\\"blog-user-link-item\\\" data-v-2d3ca9ba><img src=\\\"\" + _imports_4 + \"\\\" data-v-2d3ca9ba></div></div>\", 1);\nconst _hoisted_21 = {\n  class: \"blog-data\"\n};\nconst _hoisted_22 = {\n  class: \"blog-data-item\"\n};\nconst _hoisted_23 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"1\", -1));\nconst _hoisted_24 = {\n  class: \"blog-data-item\"\n};\nconst _hoisted_25 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"1\", -1));\nconst _hoisted_26 = {\n  class: \"blog-data-item\"\n};\nconst _hoisted_27 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"1\", -1));\nconst _hoisted_28 = {\n  class: \"blog-data-item\"\n};\nconst _hoisted_29 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"1\", -1));\nconst _hoisted_30 = {\n  class: \"blog-tag\"\n};\nconst _hoisted_31 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"blog-tag-head\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_5\n}), /*#__PURE__*/_createElementVNode(\"h1\", null, \"标签\")], -1));\nconst _hoisted_32 = {\n  class: \"blog-tag-main\"\n};\nconst _hoisted_33 = {\n  class: \"blog-tag-item\"\n};\nimport Vditor from 'vditor';\n// 1.2 引入样式\nimport 'vditor/dist/index.css';\nimport { ref, onMounted, onBeforeUnmount, inject } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { getArticleOne } from '@/api/article.js';\nimport { getAdminUserInfo, download, getArticleUserInfo } from '@/api/user.js';\nimport Comment from '../comment/Index.vue';\n// import VditorPreview from 'vditor/dist/method.min.js';\n// 2. 获取DOM引用\n\nexport default {\n  __name: 'Index',\n  setup(__props) {\n    // 1.1 引入Vditor 构造函数\n    const route = useRoute();\n    const progress = ref(0);\n    const vditor = ref();\n    const imgDownload = inject('globalImgDownload');\n    let articleId = null;\n    let articleTagList = ref([]);\n    let catalogs = ref([]);\n    let tags = ref([]);\n    let article = ref({\n      \"id\": null,\n      \"userId\": \"1\",\n      \"title\": \"\",\n      \"content\": \"\",\n      \"published\": null,\n      \"likeNum\": null,\n      \"collectNum\": null,\n      \"viewNum\": null,\n      \"commentNum\": null,\n      \"createTime\": null,\n      \"updateTime\": null\n    });\n    let adminInfo = ref({\n      \"name\": null,\n      \"birthday\": null,\n      \"avatar\": null,\n      \"sex\": null,\n      \"location\": null,\n      \"college\": null\n    });\n    let authorInfo = ref(null);\n    let avatar = ref();\n    let isLogin = ref(false);\n    if (route.query.articleId != null) {\n      // console.log(route.query.article)\n      articleId = route.query.articleId;\n      // console.log(article);\n    }\n    // 3. 在组件初始化时，就创建Vditor对象，并引用\n    onMounted(() => {\n      getAdmin();\n      if (articleId != null) getArticle();\n      window.addEventListener(\"scroll\", handleScroll, true);\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    });\n    function handleScroll() {\n      let catalog = catalogs.value;\n      let i = catalogs.value.length - 1;\n      let flag = 0;\n      for (i; i >= 0; i--) {\n        if (catalog[i].scrollTop <= window.scrollY && flag == 0) {\n          progress.value = parseInt(window.scrollY / document.documentElement.scrollHeight * 100) + \"%\";\n          flag = 1;\n          catalog[i].color = \"linear-gradient(to top,#f1214e,#6989e0,#43c6ee,#7ff121)\";\n        } else {\n          catalog[i].color = \"linear-gradient(to right, #0e0d0d, #020202)\";\n        }\n      }\n    }\n    function downloadAvatar() {\n      download(adminInfo.value.avatar).then(res => {\n        // const blob = new Blob([res.data]);\n        const reader = new FileReader();\n        reader.readAsDataURL(res);\n        reader.onload = () => {\n          avatar.value = reader.result;\n        };\n        // avatar.value=res;\n      });\n    }\n    function getAdmin() {\n      getAdminUserInfo().then(res => {\n        adminInfo.value = res.data;\n        // adminName=adminInfo.value.name\n        // downloadAvatar()\n      });\n    }\n    function getArticleUser() {\n      getArticleUserInfo(article.value.userId).then(res => {\n        authorInfo.value = res.data;\n      });\n    }\n\n    // //获取所有tag\n    // function getTags () {\n    //   getTagList()\n    //     .then(res => {\n    //       tags.value = res.data;\n\n    //     })\n    // }\n\n    //获取文章\n    function getArticle() {\n      if (articleId != null) getArticleOne(articleId).then(res => {\n        articleTagList.value = res.data.tagList;\n        article.value = res.data.article;\n        const vditorSpan = document.getElementById(\"vditor\");\n        Vditor.preview(vditorSpan, article.value.content, {\n          hljs: {\n            style: \"manni\"\n          },\n          after() {\n            getCatalog();\n          }\n        });\n        getArticleUser();\n      });\n    }\n\n    //生成目录\n    function getCatalog() {\n      let ma = document.getElementById(\"vditor\");\n      const titleTag = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"];\n      let titles = [];\n      let pre = 1;\n      let now = 0;\n      let count = 1;\n      let num = 0;\n      let parent = 1;\n      ma.childNodes.forEach((e, index) => {\n        if (titleTag.includes(e.nodeName)) {\n          // const id = ids[num++];\n          let id = 'ma-' + index;\n          ma.childNodes[index].id = id;\n          now = Number(e.nodeName.substring(1, 2));\n          // if (pre > now) {\n          //   count=parent;\n          // \tparent=now;\n          // } else if (pre < now) {\n          //   count++;\n          // }\n          // pre = now;\n          titles.push({\n            id: id,\n            title: e.innerHTML,\n            level: now,\n            nodeName: e.nodeName,\n            scrollTop: e.offsetTop,\n            color: \"linear-gradient(to right, #0e0d0d, #020202)\"\n          });\n        }\n      });\n      catalogs.value = titles;\n    }\n\n    //点击目录，自动追寻文章相应位置\n    function scrollTo(sectionId) {\n      const element = document.getElementById(sectionId);\n      if (element) {\n        console.log(sectionId);\n        element.scrollIntoView({\n          behavior: 'instant'\n        });\n      }\n    }\n    return (_ctx, _cache) => {\n      const _component_View = _resolveComponent(\"View\");\n      const _component_el_icon = _resolveComponent(\"el-icon\");\n      const _component_Pointer = _resolveComponent(\"Pointer\");\n      const _component_Star = _resolveComponent(\"Star\");\n      const _component_ChatLineSquare = _resolveComponent(\"ChatLineSquare\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _hoisted_6, _createElementVNode(\"div\", _hoisted_7, _toDisplayString(progress.value), 1)]), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(catalogs), (catalog, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          class: \"blog-catalog-for\",\n          key: index\n        }, [_createElementVNode(\"div\", {\n          class: \"blog-catalog-margin\",\n          style: _normalizeStyle({\n            marginLeft: catalog.level * 15 + 'px'\n          })\n        }, null, 4), _hoisted_9, _createElementVNode(\"span\", {\n          onClick: $event => scrollTo(catalog.id),\n          style: _normalizeStyle([{\n            backgroundImage: catalog.color\n          }, {\n            \"transition\": \"0.3s\"\n          }])\n        }, _toDisplayString(catalog.title), 13, _hoisted_10)]);\n      }), 128))])])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"h1\", _hoisted_12, _toDisplayString(_unref(article).title), 1), _hoisted_13, _createElementVNode(\"div\", _hoisted_14, [_createVNode(Comment)])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_unref(authorInfo) != null ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: _unref(imgDownload) + _unref(authorInfo).avatar,\n        style: {\n          \"height\": \"50px\"\n        }\n      }, null, 8, _hoisted_18)) : _createCommentVNode(\"\", true), _createElementVNode(\"span\", _hoisted_19, _toDisplayString(_unref(adminInfo).name), 1)]), _hoisted_20, _createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"div\", _hoisted_22, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_View)]),\n        _: 1\n      }), _hoisted_23]), _createElementVNode(\"div\", _hoisted_24, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Pointer)]),\n        _: 1\n      }), _hoisted_25]), _createElementVNode(\"div\", _hoisted_26, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_Star)]),\n        _: 1\n      }), _hoisted_27]), _createElementVNode(\"div\", _hoisted_28, [_createVNode(_component_el_icon, null, {\n        default: _withCtx(() => [_createVNode(_component_ChatLineSquare)]),\n        _: 1\n      }), _hoisted_29])])]), _createElementVNode(\"div\", _hoisted_30, [_hoisted_31, _createElementVNode(\"div\", _hoisted_32, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(articleTagList), (tag, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          class: \"blog-tag-for\",\n          key: index\n        }, [_createElementVNode(\"span\", _hoisted_33, _toDisplayString(tag.name), 1)]);\n      }), 128))])])])]);\n    };\n  }\n};","map":{"version":3,"names":["Vditor","ref","onMounted","onBeforeUnmount","inject","useRoute","getArticleOne","getAdminUserInfo","download","getArticleUserInfo","Comment","route","progress","vditor","imgDownload","articleId","articleTagList","catalogs","tags","article","adminInfo","authorInfo","avatar","isLogin","query","getAdmin","getArticle","window","addEventListener","handleScroll","removeEventListener","catalog","value","i","length","flag","scrollTop","scrollY","parseInt","document","documentElement","scrollHeight","color","downloadAvatar","then","res","reader","FileReader","readAsDataURL","onload","result","data","getArticleUser","userId","tagList","vditorSpan","getElementById","preview","content","hljs","style","after","getCatalog","ma","titleTag","titles","pre","now","count","num","parent","childNodes","forEach","e","index","includes","nodeName","id","Number","substring","push","title","innerHTML","level","offsetTop","scrollTo","sectionId","element","console","log","scrollIntoView","behavior"],"sources":["E:/java项目/blog/blog-front/src/views/blog/Index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"blog-body\">\r\n\t\t<div class=\"blog-left\">\r\n\t\t\t<div class=\"blog-catalog\">\r\n\t\t\t\t<div class=\"blog-catalog-head\">\r\n\t\t\t\t\t<img src=\"@/assets/imgs/目录2.svg\">\r\n\t\t\t\t\t<h1>目录</h1>\r\n\t\t\t\t\t<div class=\"blog-catalog-progress\">{{ progress }}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-catalog-main\">\r\n\t\t\t\t\t<div class=\"blog-catalog-for\"\r\n\t\t\t\t\t\t\t\tv-for=\"(catalog, index) in catalogs\"\r\n\t\t\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t<div class=\"blog-catalog-margin\" :style=\"{ marginLeft: catalog.level * 15 + 'px'}\"></div>\r\n\t\t\t\t\t\t<div class=\"blog-catalog-line\"></div>\r\n\t\t\t\t\t\t<span @click=\"scrollTo(catalog.id)\" :style=\"{backgroundImage:catalog.color}\" style=\"transition: 0.3s;\">{{ catalog.title }}</span>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"blog-center\">\r\n\t\t\t<h1 class=\"blog-title\">{{ article.title }}</h1>\r\n\t\t\t<div id=\"vditor\" class=\"blog-content\" ></div>\r\n\t\t\t<div class=\"blog-comment\"><Comment></Comment></div>\r\n\t\t</div>\r\n\t\t<div class=\"blog-right\">\r\n\t\t\t<div class=\"blog-user\">\r\n\t\t\t\t<div class=\"blog-user-basic\">\r\n\t\t\t\t\t<img v-if=\"authorInfo!=null\" :src=\"imgDownload+authorInfo.avatar\" style=\"height: 50px;\">\r\n\t\t\t\t\t<span style=\"margin-top:10px\">{{ adminInfo.name }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-user-link\">\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/微信.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/QQ.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/github.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/邮箱.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-data\">\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><View /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><Pointer /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><Star /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><ChatLineSquare /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"blog-tag\">\r\n\t\t\t\t<div class=\"blog-tag-head\">\r\n\t\t\t\t\t<img src=\"@/assets/imgs/标签2.svg\">\r\n\t\t\t\t\t<h1>标签</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-tag-main\">\r\n\t\t\t\t\t<div class=\"blog-tag-for\"\r\n\t\t\t\t\t\t\t\tv-for=\"(tag, index) in articleTagList\"\r\n\t\t\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t<span class=\"blog-tag-item\">{{ tag.name }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n// 1.1 引入Vditor 构造函数\r\nimport Vditor from 'vditor'\r\n// 1.2 引入样式\r\nimport 'vditor/dist/index.css';\r\nimport { ref, onMounted,onBeforeUnmount,inject } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport {getArticleOne} from '@/api/article.js'\r\nimport {getAdminUserInfo,download,getArticleUserInfo} from '@/api/user.js'\r\nimport Comment from '../comment/Index.vue'\r\n// import VditorPreview from 'vditor/dist/method.min.js';\r\n// 2. 获取DOM引用\r\nconst route = useRoute();\r\nconst progress = ref(0);\r\nconst vditor = ref();\r\nconst imgDownload = inject('globalImgDownload');\r\n\r\nlet articleId=null;\r\nlet articleTagList = ref([]);\r\nlet catalogs = ref([])\r\nlet tags = ref([]);\r\nlet article=ref({\r\n  \"id\": null,\r\n  \"userId\": \"1\",\r\n  \"title\": \"\",\r\n  \"content\": \"\",\r\n  \"published\": null,\r\n  \"likeNum\": null,\r\n  \"collectNum\": null,\r\n  \"viewNum\":null,\r\n  \"commentNum\": null,\r\n  \"createTime\": null,\r\n  \"updateTime\": null\r\n})\r\nlet adminInfo=ref({\r\n\t\"name\":null,\r\n\t\"birthday\":null,\r\n\t\"avatar\":null,\r\n\t\"sex\":null,\r\n\t\"location\":null,\r\n\t\"college\":null\r\n});\r\nlet authorInfo=ref(null)\r\nlet avatar=ref()\r\nlet isLogin=ref(false);\r\nif(route.query.articleId != null){\r\n  // console.log(route.query.article)\r\n  articleId=route.query.articleId\r\n  // console.log(article);\r\n}\r\n// 3. 在组件初始化时，就创建Vditor对象，并引用\r\nonMounted(() => {\r\n\t\r\n\tgetAdmin();\r\n\tif(articleId != null)\r\n\tgetArticle()\r\n\twindow.addEventListener(\"scroll\", handleScroll,true);\r\n\t\r\n\r\n})\r\nonBeforeUnmount(()=>{\r\n\twindow.removeEventListener(\"scroll\", handleScroll);\r\n})\r\n\r\nfunction handleScroll() {\r\n  let catalog = catalogs.value;\r\n\tlet i=catalogs.value.length-1;\r\n\tlet flag=0;\r\n\tfor(i;i>=0;i--){\r\n\t\tif(catalog[i].scrollTop<=window.scrollY && flag==0){\r\n\t\t\tprogress.value=parseInt(\r\n\t\t\t\t\t\t\t\t\t(window.scrollY / document.documentElement.scrollHeight) *\r\n\t\t\t\t\t\t\t\t\t\t\t100\r\n\t\t\t\t\t\t\t) + \"%\";\r\n\t\t\tflag=1;\r\n\t\t\tcatalog[i].color=\"linear-gradient(to top,#f1214e,#6989e0,#43c6ee,#7ff121)\";\r\n\t\t}else{\r\n\t\t\tcatalog[i].color=\"linear-gradient(to right, #0e0d0d, #020202)\";\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nfunction downloadAvatar(){\r\n\tdownload(adminInfo.value.avatar)\r\n\t.then(res=>{\r\n\t\t// const blob = new Blob([res.data]);\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(res);\r\n\t\treader.onload = () => {\r\n\t\t\tavatar.value = reader.result;\r\n\t\t};\r\n\t\t// avatar.value=res;\r\n\t})\r\n}\r\n\r\nfunction getAdmin(){\r\n  \r\n  getAdminUserInfo()\r\n  .then(res=>{\r\n    adminInfo.value=res.data\r\n    // adminName=adminInfo.value.name\r\n    // downloadAvatar()\r\n  })\r\n}\r\n\r\nfunction getArticleUser(){\r\n\r\n\tgetArticleUserInfo(article.value.userId)\r\n\t\t.then(res=>{\r\n\t\t\tauthorInfo.value=res.data;\r\n\t\t})\r\n}\r\n\r\n\r\n// //获取所有tag\r\n// function getTags () {\r\n//   getTagList()\r\n//     .then(res => {\r\n//       tags.value = res.data;\r\n      \r\n     \r\n//     })\r\n// }\r\n\r\n//获取文章\r\nfunction getArticle(){\r\n  \r\n  if(articleId!=null)\r\n    getArticleOne(articleId)\r\n    .then(res=>{\r\n     \r\n      articleTagList.value=res.data.tagList;\r\n      \r\n      article.value=res.data.article;\r\n\t\t\tconst vditorSpan = document.getElementById(\"vditor\");\r\n\t\t\tVditor.preview(vditorSpan,article.value.content,{\r\n\t\t\t\thljs:{style:\"manni\"},\r\n\t\t\t\tafter(){\r\n\t\t\t\t\tgetCatalog();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tgetArticleUser();\r\n\t\t\t\r\n     \r\n    })\r\n  \r\n}\r\n\r\n//生成目录\r\nfunction getCatalog () {\r\n  let ma = document.getElementById(\"vditor\");\r\n\tconst titleTag = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"];\r\n\tlet titles=[];\r\n\tlet pre = 1;\r\n  let now = 0;\r\n  let count = 1;\r\n  let num = 0;\r\n\tlet parent=1;\r\n  ma.childNodes.forEach((e, index) => {\r\n    if (titleTag.includes(e.nodeName)) {\r\n      // const id = ids[num++];\r\n\t\t\tlet id = 'ma-' + index;\r\n\t\t\tma.childNodes[index].id = id\r\n      now = Number(e.nodeName.substring(1, 2));\r\n      // if (pre > now) {\r\n      //   count=parent;\r\n\t\t\t// \tparent=now;\r\n      // } else if (pre < now) {\r\n      //   count++;\r\n      // }\r\n      // pre = now;\r\n      titles.push({\r\n        id: id,\r\n        title: e.innerHTML,\r\n        level: now,\r\n        nodeName: e.nodeName,\r\n\t\t\t\tscrollTop: e.offsetTop,\r\n\t\t\t\tcolor:\"linear-gradient(to right, #0e0d0d, #020202)\"\r\n      });\r\n    }\r\n  });\r\n\tcatalogs.value=titles;\r\n\t\r\n\t\r\n}\r\n\r\n//点击目录，自动追寻文章相应位置\r\nfunction scrollTo (sectionId) {\r\n\r\n  const element = document.getElementById(sectionId);\r\n  if (element) {\r\n    console.log(sectionId)\r\n    element.scrollIntoView({ behavior: 'instant' });\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n\r\n<style src=\"../../assets/css/blog.css\" scoped>\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}