{"ast":null,"code":"// 1.1 引入Vditor 构造函数\nimport Vditor from 'vditor';\n// 1.2 引入样式\nimport 'vditor/dist/index.css';\nimport { ref, onMounted } from 'vue';\nexport default {\n  data() {\n    return {\n      vditor: ref(),\n      catalog: []\n    };\n  },\n  created\n};\n// const vditor = ref()\n// let catalog = []\n\n// // 3. 在组件初始化时，就创建Vditor对象，并引用\n// onMounted(() => {\n//   vditor.value = new Vditor('vditor',{\n//   \t// height: '200px',\n//     width: '100%',\n// \t\theight: '100%',\n// \t\ttab:\"\\t\",\n// \t\t// \"outline\": {\n// \t\t// \t\"enable\": true\n// \t\t// },\n// \t\ttoolbar: [\n// \t\t\t'emoji','headings','bold','italic','strike','|','line','quote','list','ordered-list','check',\n// \t\t\t'code','inline-code','insert-after','insert-before','undo','redo','link','table','edit-mode',\n// \t\t\t'both','content-theme','export','outline'\n\n// \t\t],\n// \t\tinput(value){\n// \t\t\tgetCatalog();\n// \t\t}\n\n//   })\n\n// })\n\n// function getMarkdown(){\n// \tconst markdown = vditor.value.getValue();\n// \tconsole.log(markdown);\n// }\n\n// function getMarkdown1(){\n// \tconst markdown = vditor.value.exportJSON(vditor.value.getValue());\n// \tconsole.log(markdown);\n// }\n\n// function getCatalog(){\n// \tconst article_content = new DOMParser().parseFromString(vditor.value.getHTML(), \"text/html\");\n// \tconst titleTag = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"];\n\n// \tlet titles = [];\n// \t// 将childNodes转换为数组\n// \tconst childNodesArray = Array.from(article_content.body.childNodes);\n// \tlet pre=1;\n// \tlet now=0;\n// \tlet count=1;\n// \tchildNodesArray.forEach((e, index) => {\n// \t\tif (titleTag.includes(e.nodeName)) {\n// \t\t\tconst id = \"header-\" + index;\n// \t\t\te.setAttribute(\"id\", id);\n// \t\t\tnow=Number(e.nodeName.substring(1, 2));\n// \t\t\tif(pre>now){\n// \t\t\t\tcount--;\n// \t\t\t}else if(pre<now){\n// \t\t\t\tcount++;\n// \t\t\t}\n// \t\t\tpre=now;\n// \t\t\ttitles.push({\n// \t\t\t\tid: id,\n// \t\t\t\ttitle: e.innerHTML,\n// \t\t\t\tlevel: count,\n// \t\t\t\tnodeName: e.nodeName\n// \t\t\t});\n// \t\t}\n// \t});\n// \tcatalog = titles;\n// \t// console.log(catalog)\n\n// }","map":{"version":3,"names":["Vditor","ref","onMounted","data","vditor","catalog","created"],"sources":["E:\\java项目\\test\\blog\\blog-front\\src\\views\\edit\\Index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"edit-body\">\r\n\t\t<div class=\"edit-head\">\r\n\t\t\t<div class=\"edit-title-input\">\r\n\t\t\t\t<input placeholder=\"请输入标题\" maxlength=\"100\" />\r\n\t\t\t\t<span>0/100</span>\r\n\t\t\t</div>\r\n\t\t\t<el-button class=\"edit-save\" @click=\"getCatalog\">保存</el-button>\r\n\t\t\t<el-button type=\"primary\" @click=\"getMarkdown1\">发布</el-button>\r\n\t\t</div>\r\n\t\t<div class=\"edit-container\">\r\n\t\t\t<div class=\"edit-left\">\r\n\t\t\t\t<div class=\"edit-content\" id=\"vditor\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"edit-right\">\r\n\t\t\t\t<div class=\"edit-help\">\r\n\t\t\t\t\t<div class=\"edit-help-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/目录.svg\">\r\n\t\t\t\t\t\t<span>目录</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"edit-help-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/AI-chat.svg\">\r\n\t\t\t\t\t\t<span>AI助手</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"edit-help-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/帮助与说明.svg\">\r\n\t\t\t\t\t\t<span>说明</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"edit-help-content\">\r\n\t\t\t\t\t{{ catalog }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n\t\r\n</template>\r\n\r\n<script>\r\n// 1.1 引入Vditor 构造函数\r\nimport Vditor from 'vditor'\r\n// 1.2 引入样式\r\nimport 'vditor/dist/index.css';\r\nimport { ref, onMounted } from 'vue';\r\n\r\nexport default {\r\n    data () {\r\n      return {\r\n        vditor: ref(),\r\n\t\t\t\tcatalog: []\r\n      }\r\n    },\r\n\t\tcreated\r\n  }\r\n// const vditor = ref()\r\n// let catalog = []\r\n\r\n\r\n// // 3. 在组件初始化时，就创建Vditor对象，并引用\r\n// onMounted(() => {\r\n//   vditor.value = new Vditor('vditor',{\r\n//   \t// height: '200px',\r\n//     width: '100%',\r\n// \t\theight: '100%',\r\n// \t\ttab:\"\\t\",\r\n// \t\t// \"outline\": {\r\n// \t\t// \t\"enable\": true\r\n// \t\t// },\r\n// \t\ttoolbar: [\r\n// \t\t\t'emoji','headings','bold','italic','strike','|','line','quote','list','ordered-list','check',\r\n// \t\t\t'code','inline-code','insert-after','insert-before','undo','redo','link','table','edit-mode',\r\n// \t\t\t'both','content-theme','export','outline'\r\n\t\t\t\r\n\r\n// \t\t],\r\n// \t\tinput(value){\r\n// \t\t\tgetCatalog();\r\n// \t\t}\r\n\t\t\r\n\t\t\r\n//   })\r\n\t\r\n\t\r\n// })\r\n\r\n// function getMarkdown(){\r\n// \tconst markdown = vditor.value.getValue();\r\n// \tconsole.log(markdown);\r\n// }\r\n\r\n// function getMarkdown1(){\r\n// \tconst markdown = vditor.value.exportJSON(vditor.value.getValue());\r\n// \tconsole.log(markdown);\r\n// }\r\n\r\n// function getCatalog(){\r\n// \tconst article_content = new DOMParser().parseFromString(vditor.value.getHTML(), \"text/html\");\r\n// \tconst titleTag = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"];\r\n\r\n// \tlet titles = [];\r\n// \t// 将childNodes转换为数组\r\n// \tconst childNodesArray = Array.from(article_content.body.childNodes);\r\n// \tlet pre=1;\r\n// \tlet now=0;\r\n// \tlet count=1;\r\n// \tchildNodesArray.forEach((e, index) => {\r\n// \t\tif (titleTag.includes(e.nodeName)) {\r\n// \t\t\tconst id = \"header-\" + index;\r\n// \t\t\te.setAttribute(\"id\", id);\r\n// \t\t\tnow=Number(e.nodeName.substring(1, 2));\r\n// \t\t\tif(pre>now){\r\n// \t\t\t\tcount--;\r\n// \t\t\t}else if(pre<now){\r\n// \t\t\t\tcount++;\r\n// \t\t\t}\r\n// \t\t\tpre=now;\r\n// \t\t\ttitles.push({\r\n// \t\t\t\tid: id,\r\n// \t\t\t\ttitle: e.innerHTML,\r\n// \t\t\t\tlevel: count,\r\n// \t\t\t\tnodeName: e.nodeName\r\n// \t\t\t});\r\n// \t\t}\r\n// \t});\r\n// \tcatalog = titles;\r\n// \t// console.log(catalog)\r\n\r\n// }\r\n\r\n\r\n\r\n\r\n</script>\r\n\r\n\r\n<style src=\"../../assets/css/edit.css\" scoped>\r\n\r\n</style>"],"mappings":"AA0CA;AACA,OAAOA,MAAK,MAAO,QAAO;AAC1B;AACA,OAAO,uBAAuB;AAC9B,SAASC,GAAG,EAAEC,SAAQ,QAAS,KAAK;AAEpC,eAAe;EACXC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,MAAM,EAAEH,GAAG,CAAC,CAAC;MACjBI,OAAO,EAAE;IACP;EACF,CAAC;EACHC;AACA;AACF;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAGA;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}