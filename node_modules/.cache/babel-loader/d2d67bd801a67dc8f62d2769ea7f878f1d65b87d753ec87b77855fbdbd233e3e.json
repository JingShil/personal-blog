{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { h, defineComponent, provide, ref } from 'vue';\nimport { useConfig, useTheme } from \"../../_mixins/index.mjs\";\nimport { formLight } from \"../styles/index.mjs\";\nimport style from \"./styles/form.cssr.mjs\";\nimport { keysOf } from \"../../_utils/index.mjs\";\nimport { formInjectionKey, formItemInstsInjectionKey } from \"./context.mjs\";\nexport const formProps = Object.assign(Object.assign({}, useTheme.props), {\n  inline: Boolean,\n  labelWidth: [Number, String],\n  labelAlign: String,\n  labelPlacement: {\n    type: String,\n    default: 'top'\n  },\n  model: {\n    type: Object,\n    default: () => {}\n  },\n  rules: Object,\n  disabled: Boolean,\n  size: String,\n  showRequireMark: {\n    type: Boolean,\n    default: undefined\n  },\n  requireMarkPlacement: String,\n  showFeedback: {\n    type: Boolean,\n    default: true\n  },\n  onSubmit: {\n    type: Function,\n    default: e => {\n      e.preventDefault();\n    }\n  },\n  showLabel: {\n    type: Boolean,\n    default: undefined\n  },\n  validateMessages: Object\n});\nexport default defineComponent({\n  name: 'Form',\n  props: formProps,\n  setup(props) {\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    useTheme('Form', '-form', style, formLight, props, mergedClsPrefixRef);\n    // from path to form-item\n    const formItems = {};\n    // for label-width = 'auto'\n    const maxChildLabelWidthRef = ref(undefined);\n    const deriveMaxChildLabelWidth = currentWidth => {\n      const currentMaxChildLabelWidth = maxChildLabelWidthRef.value;\n      if (currentMaxChildLabelWidth === undefined || currentWidth >= currentMaxChildLabelWidth) {\n        maxChildLabelWidthRef.value = currentWidth;\n      }\n    };\n    function validate(validateCallback, shouldRuleBeApplied = () => true) {\n      return __awaiter(this, void 0, void 0, function* () {\n        return yield new Promise((resolve, reject) => {\n          const formItemValidationPromises = [];\n          for (const key of keysOf(formItems)) {\n            const formItemInstances = formItems[key];\n            for (const formItemInstance of formItemInstances) {\n              if (formItemInstance.path) {\n                formItemValidationPromises.push(formItemInstance.internalValidate(null, shouldRuleBeApplied));\n              }\n            }\n          }\n          void Promise.all(formItemValidationPromises).then(results => {\n            const formInvalid = results.some(result => !result.valid);\n            const errors = [];\n            const warnings = [];\n            results.forEach(result => {\n              var _a, _b;\n              if ((_a = result.errors) === null || _a === void 0 ? void 0 : _a.length) {\n                errors.push(result.errors);\n              }\n              if ((_b = result.warnings) === null || _b === void 0 ? void 0 : _b.length) {\n                warnings.push(result.warnings);\n              }\n            });\n            if (validateCallback) {\n              validateCallback(errors.length ? errors : undefined, {\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n            if (formInvalid) {\n              reject(errors.length ? errors : undefined);\n            } else {\n              resolve({\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n          });\n        });\n      });\n    }\n    function restoreValidation() {\n      for (const key of keysOf(formItems)) {\n        const formItemInstances = formItems[key];\n        for (const formItemInstance of formItemInstances) {\n          formItemInstance.restoreValidation();\n        }\n      }\n    }\n    provide(formInjectionKey, {\n      props,\n      maxChildLabelWidthRef,\n      deriveMaxChildLabelWidth\n    });\n    provide(formItemInstsInjectionKey, {\n      formItems\n    });\n    const formExposedMethod = {\n      validate,\n      restoreValidation\n    };\n    return Object.assign(formExposedMethod, {\n      mergedClsPrefix: mergedClsPrefixRef\n    });\n  },\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"form\", {\n      class: [`${mergedClsPrefix}-form`, this.inline && `${mergedClsPrefix}-form--inline`],\n      onSubmit: this.onSubmit\n    }, this.$slots);\n  }\n});","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","h","defineComponent","provide","ref","useConfig","useTheme","formLight","style","keysOf","formInjectionKey","formItemInstsInjectionKey","formProps","Object","assign","props","inline","Boolean","labelWidth","Number","String","labelAlign","labelPlacement","type","default","model","rules","disabled","size","showRequireMark","undefined","requireMarkPlacement","showFeedback","onSubmit","Function","preventDefault","showLabel","validateMessages","name","setup","mergedClsPrefixRef","formItems","maxChildLabelWidthRef","deriveMaxChildLabelWidth","currentWidth","currentMaxChildLabelWidth","validate","validateCallback","shouldRuleBeApplied","formItemValidationPromises","key","formItemInstances","formItemInstance","path","push","internalValidate","all","results","formInvalid","some","valid","errors","warnings","forEach","_a","_b","length","restoreValidation","formExposedMethod","mergedClsPrefix","render","class","$slots"],"sources":["E:/java项目/test/blog/blog-front/node_modules/naive-ui/es/form/src/Form.mjs"],"sourcesContent":["var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { h, defineComponent, provide, ref } from 'vue';\nimport { useConfig, useTheme } from \"../../_mixins/index.mjs\";\nimport { formLight } from \"../styles/index.mjs\";\nimport style from \"./styles/form.cssr.mjs\";\nimport { keysOf } from \"../../_utils/index.mjs\";\nimport { formInjectionKey, formItemInstsInjectionKey } from \"./context.mjs\";\nexport const formProps = Object.assign(Object.assign({}, useTheme.props), {\n  inline: Boolean,\n  labelWidth: [Number, String],\n  labelAlign: String,\n  labelPlacement: {\n    type: String,\n    default: 'top'\n  },\n  model: {\n    type: Object,\n    default: () => {}\n  },\n  rules: Object,\n  disabled: Boolean,\n  size: String,\n  showRequireMark: {\n    type: Boolean,\n    default: undefined\n  },\n  requireMarkPlacement: String,\n  showFeedback: {\n    type: Boolean,\n    default: true\n  },\n  onSubmit: {\n    type: Function,\n    default: e => {\n      e.preventDefault();\n    }\n  },\n  showLabel: {\n    type: Boolean,\n    default: undefined\n  },\n  validateMessages: Object\n});\nexport default defineComponent({\n  name: 'Form',\n  props: formProps,\n  setup(props) {\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    useTheme('Form', '-form', style, formLight, props, mergedClsPrefixRef);\n    // from path to form-item\n    const formItems = {};\n    // for label-width = 'auto'\n    const maxChildLabelWidthRef = ref(undefined);\n    const deriveMaxChildLabelWidth = currentWidth => {\n      const currentMaxChildLabelWidth = maxChildLabelWidthRef.value;\n      if (currentMaxChildLabelWidth === undefined || currentWidth >= currentMaxChildLabelWidth) {\n        maxChildLabelWidthRef.value = currentWidth;\n      }\n    };\n    function validate(validateCallback, shouldRuleBeApplied = () => true) {\n      return __awaiter(this, void 0, void 0, function* () {\n        return yield new Promise((resolve, reject) => {\n          const formItemValidationPromises = [];\n          for (const key of keysOf(formItems)) {\n            const formItemInstances = formItems[key];\n            for (const formItemInstance of formItemInstances) {\n              if (formItemInstance.path) {\n                formItemValidationPromises.push(formItemInstance.internalValidate(null, shouldRuleBeApplied));\n              }\n            }\n          }\n          void Promise.all(formItemValidationPromises).then(results => {\n            const formInvalid = results.some(result => !result.valid);\n            const errors = [];\n            const warnings = [];\n            results.forEach(result => {\n              var _a, _b;\n              if ((_a = result.errors) === null || _a === void 0 ? void 0 : _a.length) {\n                errors.push(result.errors);\n              }\n              if ((_b = result.warnings) === null || _b === void 0 ? void 0 : _b.length) {\n                warnings.push(result.warnings);\n              }\n            });\n            if (validateCallback) {\n              validateCallback(errors.length ? errors : undefined, {\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n            if (formInvalid) {\n              reject(errors.length ? errors : undefined);\n            } else {\n              resolve({\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n          });\n        });\n      });\n    }\n    function restoreValidation() {\n      for (const key of keysOf(formItems)) {\n        const formItemInstances = formItems[key];\n        for (const formItemInstance of formItemInstances) {\n          formItemInstance.restoreValidation();\n        }\n      }\n    }\n    provide(formInjectionKey, {\n      props,\n      maxChildLabelWidthRef,\n      deriveMaxChildLabelWidth\n    });\n    provide(formItemInstsInjectionKey, {\n      formItems\n    });\n    const formExposedMethod = {\n      validate,\n      restoreValidation\n    };\n    return Object.assign(formExposedMethod, {\n      mergedClsPrefix: mergedClsPrefixRef\n    });\n  },\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"form\", {\n      class: [`${mergedClsPrefix}-form`, this.inline && `${mergedClsPrefix}-form--inline`],\n      onSubmit: this.onSubmit\n    }, this.$slots);\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}