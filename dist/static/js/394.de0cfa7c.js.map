{"version":3,"file":"static/js/394.de0cfa7c.js","mappings":"kQAEO,SAASA,EAAMC,GACrB,OAAOC,EAAAA,EAAAA,GAAQ,CACdC,IAAI,cACJC,OAAO,OACPC,KAAKJ,GAEP,CAUO,SAASK,EAAKL,GACpB,OAAOC,EAAAA,EAAAA,GAAQ,CACdC,IAAI,aACJC,OAAO,OACPC,KAAKJ,GAEP,CAEO,SAASM,EAASC,GACxB,OAAON,EAAAA,EAAAA,GAAQ,CACdC,IAAI,wBACJC,OAAO,MACPK,OAAO,CACND,YAEDE,aAAc,QAEhB,CAEO,SAASC,IACf,OAAOT,EAAAA,EAAAA,GAAQ,CACdC,IAAI,aACJC,OAAO,OAET,CAEO,SAASQ,IACf,OAAOV,EAAAA,EAAAA,GAAQ,CACdC,IAAI,mBACJC,OAAO,OAET,C,uqDC2CA,MAAMS,GAAQC,EAAAA,EAAAA,OACCC,EAAAA,EAAAA,MACf,IAAIC,EAAU,KACVC,GAAiBF,EAAAA,EAAAA,IAAI,IACrBG,GAAWH,EAAAA,EAAAA,IAAI,IAEfI,IADOJ,EAAAA,EAAAA,IAAI,KACHA,EAAAA,EAAAA,IAAI,CACd,GAAM,KACN,OAAU,IACV,MAAS,GACT,QAAW,GACX,UAAa,KACb,QAAW,KACX,WAAc,KACd,QAAU,KACV,WAAc,KACd,WAAc,KACd,WAAc,QAEZK,GAAUL,EAAAA,EAAAA,IAAI,CACjB,KAAO,KACP,SAAW,KACX,OAAS,KACT,IAAM,KACN,SAAW,KACX,QAAU,OAEPM,GAAON,EAAAA,EAAAA,MAcX,SAASO,KACRf,EAAAA,EAAAA,IAASa,EAAUG,MAAMF,QACxBG,MAAKC,IAEL,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcH,GACrBC,EAAOG,OAAS,KACfR,EAAOE,MAAQG,EAAOI,MAAM,CAC5B,GAGH,CAEA,SAASC,KAEPnB,EAAAA,EAAAA,MACCY,MAAKC,IACJL,EAAUG,MAAME,EAAIpB,KAEpBiB,GAAgB,GAEpB,CAcA,SAASU,IAEO,MAAXhB,IACDiB,EAAAA,EAAAA,IAAcjB,GACbQ,MAAKC,IAEJR,EAAeM,MAAME,EAAIpB,KAAK6B,QAE9Bf,EAAQI,MAAME,EAAIpB,KAAKc,QAC1B,MAAMgB,EAAaC,SAASC,eAAe,UAC3CC,IAAAA,QAAeH,EAAWhB,EAAQI,MAAMgB,QAAQ,CAC/CC,KAAK,CAACC,MAAM,SACZC,KAAAA,GACCC,GACD,GACC,GAKL,CAGA,SAASA,IACP,IAAIC,EAAKR,SAASC,eAAe,UAClC,MAAMQ,EAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAChD,IAAIC,EAAO,GAENC,EAAM,EAIVH,EAAGI,WAAWC,SAAQ,CAACC,EAAGC,KACxB,GAAIN,EAASO,SAASF,EAAEG,UAAW,CAEpC,IAAIC,EAAK,MAAQH,EACjBP,EAAGI,WAAWG,GAAOG,GAAKA,EACvBP,EAAMQ,OAAOL,EAAEG,SAASG,UAAU,EAAG,IAQrCV,EAAOW,KAAK,CACVH,GAAIA,EACJI,MAAOR,EAAES,UACTC,MAAOb,EACPM,SAAUH,EAAEG,UAEhB,KAEHnC,EAASK,MAAMuB,CAEhB,CAEA,SAASe,EAAUC,GAEjB,MAAMC,EAAU3B,SAASC,eAAeyB,GACpCC,IACFC,QAAQC,IAAIH,GACZC,EAAQG,eAAe,CAAEC,SAAU,YAEvC,C,OAhH4B,MAAzBtD,EAAMuD,MAAMpD,YAEbA,EAAUH,EAAMuD,MAAMpD,YAIxBqD,EAAAA,EAAAA,KAAU,KAETtC,IACgB,MAAbf,GACHgB,GAAY,I,mwCC5Hb,MAAMsC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://blog-front/./src/api/user.js","webpack://blog-front/./src/views/blog/Index.vue","webpack://blog-front/./src/views/blog/Index.vue?4373"],"sourcesContent":["import request from '@/utils/request.js'\r\n\r\nexport function login(user){\r\n\treturn request({\r\n\t\turl:'/user/login',\r\n\t\tmethod:'post',\r\n\t\tdata:user\r\n\t})\r\n}\r\n\r\nexport function register(user){\r\n\treturn request({\r\n\t\turl:'/user/register',\r\n\t\tmethod:'post',\r\n\t\tdata:user\r\n\t})\r\n}\r\n\r\nexport function save(user){\r\n\treturn request({\r\n\t\turl:'/user/save',\r\n\t\tmethod:'post',\r\n\t\tdata:user\r\n\t})\r\n}\r\n\r\nexport function download(filePath){\r\n\treturn request({\r\n\t\turl:'/user/download/avatar',\r\n\t\tmethod:'get',\r\n\t\tparams:{\r\n\t\t\tfilePath\r\n\t\t},\r\n\t\tresponseType: 'blob'\r\n\t})\r\n}\r\n\r\nexport function getUserInfo(){\r\n\treturn request({\r\n\t\turl:'/user/info',\r\n\t\tmethod:'get'\r\n\t})\r\n}\r\n\r\nexport function getAdminUserInfo(){\r\n\treturn request({\r\n\t\turl:'/user/admin/info',\r\n\t\tmethod:'get'\r\n\t})\r\n}","<template>\r\n\t<div class=\"blog-body\">\r\n\t\t<div class=\"blog-left\">\r\n\t\t\t<div class=\"blog-catalog\">\r\n\t\t\t\t<div class=\"blog-catalog-head\">\r\n\t\t\t\t\t<img src=\"@/assets/imgs/目录2.svg\">\r\n\t\t\t\t\t<h1>目录</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-catalog-main\">\r\n\t\t\t\t\t<div class=\"blog-catalog-for\"\r\n\t\t\t\t\t\t\t\tv-for=\"(catalog, index) in catalogs\"\r\n\t\t\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t:style=\"{ marginLeft: catalog.level * 20 + 'px'}\"\r\n\t\t\t\t\t\t\t\t\t@click=\"scrollTo(catalog.id)\">{{ catalog.title }}</span>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"blog-center\">\r\n\t\t\t<h1 class=\"blog-title\">{{ article.title }}</h1>\r\n\t\t\t<div id=\"vditor\" class=\"blog-content\"></div>\r\n\t\t\t<!-- <div class=\"blog-comment\">评论</div> -->\r\n\t\t</div>\r\n\t\t<div class=\"blog-right\">\r\n\t\t\t<div class=\"blog-user\">\r\n\t\t\t\t<div class=\"blog-user-basic\">\r\n\t\t\t\t\t<img :src=\"avatar\" style=\"height: 50px;\">\r\n\t\t\t\t\t<span style=\"margin-top:10px\">{{ adminInfo.name }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-user-link\">\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/微信.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/QQ.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/github.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-user-link-item\">\r\n\t\t\t\t\t\t<img src=\"../../assets/imgs/邮箱.svg\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-data\">\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><View /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><Pointer /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><Star /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"blog-data-item\">\r\n\t\t\t\t\t\t<el-icon><ChatLineSquare /></el-icon>\r\n\t\t\t\t\t\t<span>1</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"blog-tag\">\r\n\t\t\t\t<div class=\"blog-tag-head\">\r\n\t\t\t\t\t<img src=\"@/assets/imgs/标签2.svg\">\r\n\t\t\t\t\t<h1>标签</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-tag-main\">\r\n\t\t\t\t\t<div class=\"blog-tag-for\"\r\n\t\t\t\t\t\t\t\tv-for=\"(tag, index) in articleTagList\"\r\n\t\t\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t<span class=\"blog-tag-item\">{{ tag.name }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n// 1.1 引入Vditor 构造函数\r\nimport Vditor from 'vditor'\r\n// 1.2 引入样式\r\nimport 'vditor/dist/index.css';\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport {getArticleOne} from '@/api/article.js'\r\nimport {getAdminUserInfo,download} from '@/api/user.js'\r\n// import VditorPreview from 'vditor/dist/method.min.js';\r\n// 2. 获取DOM引用\r\nconst route = useRoute();\r\nconst vditor = ref()\r\nlet articleId=null;\r\nlet articleTagList = ref([]);\r\nlet catalogs = ref([])\r\nlet tags = ref([]);\r\nlet article=ref({\r\n  \"id\": null,\r\n  \"userId\": \"1\",\r\n  \"title\": \"\",\r\n  \"content\": \"\",\r\n  \"published\": null,\r\n  \"likeNum\": null,\r\n  \"collectNum\": null,\r\n  \"viewNum\":null,\r\n  \"commentNum\": null,\r\n  \"createTime\": null,\r\n  \"updateTime\": null\r\n})\r\nlet adminInfo=ref({\r\n\t\"name\":null,\r\n\t\"birthday\":null,\r\n\t\"avatar\":null,\r\n\t\"sex\":null,\r\n\t\"location\":null,\r\n\t\"college\":null\r\n});\r\nlet avatar=ref()\r\nif(route.query.articleId != null){\r\n  // console.log(route.query.article)\r\n  articleId=route.query.articleId\r\n  // console.log(article);\r\n}\r\n// 3. 在组件初始化时，就创建Vditor对象，并引用\r\nonMounted(() => {\r\n\t\r\n\tgetAdmin();\r\n\tif(articleId != null)\r\n\tgetArticle()\r\n})\r\n\r\nfunction downloadAvatar(){\r\n\tdownload(adminInfo.value.avatar)\r\n\t.then(res=>{\r\n\t\t// const blob = new Blob([res.data]);\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(res);\r\n\t\treader.onload = () => {\r\n\t\t\tavatar.value = reader.result;\r\n\t\t};\r\n\t\t// avatar.value=res;\r\n\t})\r\n}\r\n\r\nfunction getAdmin(){\r\n  \r\n  getAdminUserInfo()\r\n  .then(res=>{\r\n    adminInfo.value=res.data\r\n    // adminName=adminInfo.value.name\r\n    downloadAvatar()\r\n  })\r\n}\r\n\r\n\r\n// //获取所有tag\r\n// function getTags () {\r\n//   getTagList()\r\n//     .then(res => {\r\n//       tags.value = res.data;\r\n      \r\n     \r\n//     })\r\n// }\r\n\r\n//获取文章\r\nfunction getArticle(){\r\n  \r\n  if(articleId!=null)\r\n    getArticleOne(articleId)\r\n    .then(res=>{\r\n     \r\n      articleTagList.value=res.data.tagList;\r\n      \r\n      article.value=res.data.article;\r\n\t\t\tconst vditorSpan = document.getElementById(\"vditor\");\r\n\t\t\tVditor.preview(vditorSpan,article.value.content,{\r\n\t\t\t\thljs:{style:\"manni\"},\r\n\t\t\t\tafter(){\r\n\t\t\t\t\tgetCatalog();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n     \r\n    })\r\n  \r\n}\r\n\r\n//生成目录\r\nfunction getCatalog () {\r\n  let ma = document.getElementById(\"vditor\");\r\n\tconst titleTag = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"];\r\n\tlet titles=[];\r\n\tlet pre = 1;\r\n  let now = 0;\r\n  let count = 1;\r\n  let num = 0;\r\n\tlet parent=1;\r\n  ma.childNodes.forEach((e, index) => {\r\n    if (titleTag.includes(e.nodeName)) {\r\n      // const id = ids[num++];\r\n\t\t\tlet id = 'ma-' + index;\r\n\t\t\tma.childNodes[index].id = id\r\n      now = Number(e.nodeName.substring(1, 2));\r\n      // if (pre > now) {\r\n      //   count=parent;\r\n\t\t\t// \tparent=now;\r\n      // } else if (pre < now) {\r\n      //   count++;\r\n      // }\r\n      // pre = now;\r\n      titles.push({\r\n        id: id,\r\n        title: e.innerHTML,\r\n        level: now,\r\n        nodeName: e.nodeName\r\n      });\r\n    }\r\n  });\r\n\tcatalogs.value=titles;\r\n\t\r\n}\r\n//点击目录，自动追寻文章相应位置\r\nfunction scrollTo (sectionId) {\r\n\r\n  const element = document.getElementById(sectionId);\r\n  if (element) {\r\n    console.log(sectionId)\r\n    element.scrollIntoView({ behavior: 'instant' });\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n\r\n<style src=\"../../assets/css/blog.css\" scoped>\r\n\r\n</style>","import script from \"./Index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"../../assets/css/blog.css?vue&type=style&index=0&id=620c85ff&scoped=true&lang=css&external\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-620c85ff\"]])\n\nexport default __exports__"],"names":["login","user","request","url","method","data","save","download","filePath","params","responseType","getUserInfo","getAdminUserInfo","route","useRoute","ref","articleId","articleTagList","catalogs","article","adminInfo","avatar","downloadAvatar","value","then","res","reader","FileReader","readAsDataURL","onload","result","getAdmin","getArticle","getArticleOne","tagList","vditorSpan","document","getElementById","Vditor","content","hljs","style","after","getCatalog","ma","titleTag","titles","now","childNodes","forEach","e","index","includes","nodeName","id","Number","substring","push","title","innerHTML","level","scrollTo","sectionId","element","console","log","scrollIntoView","behavior","query","onMounted","__exports__"],"sourceRoot":""}