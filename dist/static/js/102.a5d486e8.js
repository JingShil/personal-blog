"use strict";(self["webpackChunkblog_front"]=self["webpackChunkblog_front"]||[]).push([[102],{8021:function(e,t,l){l.d(t,{Tn:function(){return i},UN:function(){return s},_R:function(){return o},oZ:function(){return a}});var n=l(7267);function i(e){return(0,n.A)({url:"/tag/list",method:"get",params:{name:e}})}function a(e){return(0,n.A)({url:"/tag/list/private",method:"get",params:{name:e}})}function s(e){return(0,n.A)({url:"/tag/save",method:"post",data:e})}function o(e){return(0,n.A)({url:"/tag/delete",method:"delete",params:{tagId:e}})}},9132:function(e,t,l){l.r(t),l.d(t,{default:function(){return G}});l(4114);var n=l(4055),i=l(5167),a=l(1469),s=l(7959),o=l(7153),c=l.p+"static/img/目录.8d8edaba.svg",u=l.p+"static/img/标签.1e9719d5.svg",d=l.p+"static/img/AI-chat.5c0c6d33.svg",r=l.p+"static/img/帮助与说明.fbc27bbb.svg",p=l(9460),m=l.n(p),v=l(8021),g=l(2999),f=l(3229),k=l(1174),h=l(4127);const L=e=>((0,n.Qi)("data-v-0cf3b6ca"),e=e(),(0,n.jt)(),e),b={class:"edit-body"},y={class:"edit-head"},C={class:"edit-title-input"},N=L((()=>(0,n.Lk)("span",null,"0/100",-1))),T=L((()=>(0,n.Lk)("img",{src:o,style:{height:"40px","margin-left":"20px","border-radius":"30px"}},null,-1))),E={class:"edit-container"},R=L((()=>(0,n.Lk)("div",{class:"edit-left"},[(0,n.Lk)("div",{class:"edit-content",id:"vditor"})],-1))),w={class:"edit-right"},x={class:"edit-help"},I=L((()=>(0,n.Lk)("img",{src:c},null,-1))),_=L((()=>(0,n.Lk)("span",null,"目录",-1))),A=[I,_],K=L((()=>(0,n.Lk)("img",{src:u},null,-1))),H=L((()=>(0,n.Lk)("span",null,"标签",-1))),X=[K,H],j=L((()=>(0,n.Lk)("div",{class:"edit-help-item"},[(0,n.Lk)("img",{src:d}),(0,n.Lk)("span",null,"AI助手")],-1))),V=L((()=>(0,n.Lk)("div",{class:"edit-help-item"},[(0,n.Lk)("img",{src:r}),(0,n.Lk)("span",null,"语法")],-1))),B={class:"edit-help-content"},F={key:0,class:"edit-help-content-item"},q=L((()=>(0,n.Lk)("div",{class:"edit-help-content-head"},[(0,n.Lk)("span",null,"文章目录")],-1))),M={class:"edit-help-catalog"},Q=L((()=>(0,n.Lk)("div",{class:"blog-catalog-line"},null,-1))),U=["onClick"],S={key:1,class:"edit-help-content-item"},W=L((()=>(0,n.Lk)("div",{class:"edit-help-content-head"},[(0,n.Lk)("span",null,"标签")],-1))),D={class:"edit-help-tag"},J=["onClick"],O="http://43.129.171.44:8081/img/upload";var P={__name:"Index",setup(e){const t=(0,f.lq)(),l=(0,i.KR)();let o=(0,i.KR)([]),c=(0,i.KR)(0),u=(0,i.KR)([]),d={},r=(0,i.KR)([]),p=null;(0,i.KR)(null);let L=(0,i.KR)({id:null,title:"",content:"",published:null,likeNum:null,collectNum:null,viewNum:null,commentNum:null,createTime:null,updateTime:null});function I(e){c.value=e}function _(e){for(let t of r.value)if(t.id==e)return!0;return!1}function K(){null!=p&&(0,g.X1)(p).then((e=>{r.value=e.data.tagList,L.value=e.data.article,l.value.setValue(L.value.content),z()}))}function H(e){for(let t of r.value)if(t.id==e.id)return void(r.value=r.value.filter((t=>t.id!==e.id)));r.value.push(e)}function P(e){let t=l.value.getValue();null==t&&(t=""),null==L.value.title&&(L.value.title="无标题"),L.value.content=t,L.value.published=e,d={article:L.value,tagList:r.value},k.s.confirm("确定保存吗？",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,g.UN)(d).then((e=>{1==e.code?(0,h.nk)({type:"success",message:"保存成功"}):(0,h.nk)({type:"info",message:"保存失败"})}))})).catch((()=>{(0,h.nk)({type:"info",message:"取消"})}))}function Z(){(0,v.Tn)().then((e=>{u.value=e.data}))}function z(){const e=l.value.getCurrentMode(),t=document.getElementsByClassName("vditor-reset"),n=["H1","H2","H3","H4","H5","H6"];let i=null,a=null,s="ir";i=t[2],"wysiwyg"===e?(a=t[0],s="wysiwyg"):"sv"===e?(a=t[1],s="sv"):"ir"===e&&(a=t[2],s="ir");let c=[];i.childNodes.forEach(((e,t)=>{if(n.includes(e.nodeName)){const l=s+"-"+t;c.push({id:l,scrollTop:e.offsetTop}),a.childNodes[t].id=l}}));const u=(new DOMParser).parseFromString(l.value.getHTML(),"text/html");let d=[];const r=Array.from(u.body.childNodes);let p=0,m=0;r.forEach(((e,t)=>{if(n.includes(e.nodeName)){const t=c[m].id;p=Number(e.nodeName.substring(1,2)),d.push({id:t,title:e.innerHTML,level:p,nodeName:e.nodeName,scrollTop:c[m++].scrollTop,color:"black"})}})),o.value=d;const v=Array.from(document.getElementsByClassName("vditor-reset"));v.forEach((e=>{e.addEventListener("scroll",(function(){let t=o.value,l=o.value.length-1,n=0;for(l;l>=0;l--)t[l].scrollTop<=e.scrollTop&&0==n?(n=1,t[l].color="rgb(241, 30, 146)"):t[l].color="black"}),!0)}))}function G(e){const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"instant"})}return null!=t.query.articleId&&(p=t.query.articleId),(0,n.sV)((()=>{l.value=new(m())("vditor",{width:"100%",height:"80vh",tab:"\t",toolbar:["emoji","headings","bold","italic","strike","|","line","quote","list","ordered-list","check","code","inline-code","insert-after","insert-before","undo","redo","link","table","edit-mode","both","content-theme","export","upload"],hljs:{style:"manni"},input(e){z()},after(){l.value.setValue(""),K()},upload:{multiple:!1,url:O,accept:"image/jpg, image/jpeg, image/png",fieldName:"file",max:10485760,headers:{Token:localStorage.getItem("token")}}}),Z()})),(e,t)=>{const l=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("div",y,[(0,n.Lk)("div",C,[(0,n.bo)((0,n.Lk)("input",{placeholder:"请输入标题",maxlength:"100","onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.R1)(L).title=e)},null,512),[[a.Jo,(0,i.R1)(L).title]]),N]),(0,n.bF)(l,{class:"edit-save"},{default:(0,n.k6)((()=>[(0,n.eW)("保存")])),_:1}),(0,n.bF)(l,{type:"primary",onClick:t[1]||(t[1]=e=>P(1))},{default:(0,n.k6)((()=>[(0,n.eW)("发布")])),_:1}),T]),(0,n.Lk)("div",E,[R,(0,n.Lk)("div",w,[(0,n.Lk)("div",x,[(0,n.Lk)("div",{class:"edit-help-item",onClick:t[2]||(t[2]=e=>I(0))},A),(0,n.Lk)("div",{class:"edit-help-item",onClick:t[3]||(t[3]=e=>I(1))},X),j,V]),(0,n.Lk)("div",B,[0==(0,i.R1)(c)?((0,n.uX)(),(0,n.CE)("div",F,[q,(0,n.Lk)("div",M,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,i.R1)(o),((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"edit-help-catalog-for",key:t},[(0,n.Lk)("div",{class:"blog-catalog-margin",style:(0,s.Tr)({marginLeft:15*e.level+"px"})},null,4),Q,(0,n.Lk)("span",{onClick:t=>G(e.id),style:(0,s.Tr)([{color:e.color},{transition:"0.3s"}])},(0,s.v_)(e.title),13,U)])))),128))])])):(0,n.Q3)("",!0),1==(0,i.R1)(c)?((0,n.uX)(),(0,n.CE)("div",S,[W,(0,n.Lk)("div",D,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,i.R1)(u),((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"edit-help-tag-for",key:t},[(0,n.Lk)("span",{class:(0,s.C4)(["edit-tag",{"edit-tag-select":_(e.id)}]),type:"primary",onClick:t=>H(e)},(0,s.v_)(e.name),11,J)])))),128))])])):(0,n.Q3)("",!0)])])])])}}},Z=l(5932);const z=(0,Z.A)(P,[["__scopeId","data-v-0cf3b6ca"]]);var G=z},7153:function(e,t,l){e.exports=l.p+"static/img/fufu.c482465b.jpg"}}]);
//# sourceMappingURL=102.a5d486e8.js.map